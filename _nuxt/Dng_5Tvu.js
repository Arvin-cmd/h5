import{_ as M}from"./DttBTQhN.js";import{u as S,s as T,a as O,b as V}from"./DZ6mmShV.js";import{y as D,z as K,L as Q,M as W,e as G,n as i,v as p,q as s,B as e,w as x,N as C,F as m,C as N,s as l,O as J,P as U,p as r}from"./riPymW3M.js";import{t as X,s as Y}from"./CRZOKbAF.js";import{o as Z,a as ee}from"./XXTYGTbl.js";import{u as se}from"./7b4zzCzZ.js";import{u as te}from"./DIto6Gfk.js";import"./DlAUqK2U.js";import"./DJz_k-9G.js";const oe={class:"h-screen flex flex-col"},ne={class:"flex-1 overflow-auto px-3 mt-4"},ae=["onClick"],le={class:"relative"},re={class:"py-2 px-3 home-bg flex justify-between"},ie=["onClick"],ce={class:"px-3 py-2 flex"},de=["src"],ue={class:"pl-3 text-sm text-white/80 flex-1"},_e={class:"flex items-center justify-between"},pe={class:"font-bold text-base"},fe={class:"flex items-center justify-between"},he={class:"font-bold text-base"},xe={class:"flex justify-end mt-1"},me={class:"px-4"},v=20,Re=D({__name:"record",setup(ve){const{t:n}=K(),{openExplorer:B}=Z(),{betRecord:c}=Q(te()),F=se(),{tokenAddressMap:R}=X(),$=W(),{data:g,refetch:I,isRefetching:j,isFetching:A,hasNextPage:L,fetchNextPage:H}=S({queryKey:G(()=>["getAuctionsInfo",c.value.length]),refetchOnWindowFocus:!1,initialPageParam:1,getNextPageParam:o=>o.nextCursor,queryFn:async({pageParam:o=1})=>{const f=(o-1)*v,d=c.value.slice(f,o*v);if(!d.length)return{list:[],nextCursor:void 0};const u=await F.getAuctionsInfo(d.map(a=>BigInt(a))),_={list:u.map((a,h)=>({id:Number(c.value[f+h]),user:a.user,award:a.award,total:Number(a.total),pour:Number(a.pour)}))??[],nextCursor:void 0};return(o-1)*Number(v)+u.length<c.value.length&&(_.nextCursor=o+1),_}});return(o,f)=>{const d=M,u=O,_=U,b=Y,a=V,h=T;return r(),i("div",oe,[p(d,{title:e(n)("下注记录")},null,8,["title"]),s("div",ne,[p(h,{"model-value":e(j),onRefresh:e(I)},{default:x(()=>{var y,k;return[((k=(y=e(g))==null?void 0:y.pages[0])==null?void 0:k.list.length)===0?(r(),C(u,{key:0,image:"/empty.png",description:e(n)("暂无竞拍")},null,8,["description"])):(r(),C(a,{key:1,loading:e(A),finished:!e(L),"loading-text":e(n)("加载中")+"...","finished-text":e(n)("没有更多了"),onLoad:e(H)},{default:x(()=>{var w;return[(r(!0),i(m,null,N((w=e(g))==null?void 0:w.pages,(P,q)=>(r(),i(m,{key:q},[(r(!0),i(m,null,N(P.list,(t,z)=>(r(),i("div",{key:z,class:"mb-3 bg-[#2A2B30] rounded-lg border-bg",onClick:E=>e($).push(`/auction/info?id=${t.id}`)},[s("div",le,[s("div",re,[s("span",null,"# "+l(t.id),1),s("span",{onClick:J(E=>e(B)("address",t==null?void 0:t.award),["stop"])},[s("span",null,l(e(n)("奖品"))+": "+l(("addressFl"in o?o.addressFl:e(ee))(t==null?void 0:t.award)),1),p(_,{"class-prefix":"iconfont icon-jump text-white/60 ml-1"})],8,ie)]),s("div",ce,[s("div",null,[s("img",{class:"w-20 h-20",src:e(R)[t.award].icon,alt:""},null,8,de)]),s("div",ue,[s("div",_e,[s("span",null,l(e(n)("总筹码")),1),s("span",pe,l(t.total),1)]),s("div",fe,[s("span",null,l(e(n)("已下注")),1),s("span",he,l(t.pour),1)]),s("div",xe,[p(b,{color:"#77dee8",plain:"",size:"mini",round:""},{default:x(()=>[s("span",me,l(e(n)("详情")),1)]),_:1})])])])])],8,ae))),128))],64))),128))]}),_:1},8,["loading","finished","loading-text","finished-text","onLoad"]))]}),_:1},8,["model-value","onRefresh"])])])}}});export{Re as default};
