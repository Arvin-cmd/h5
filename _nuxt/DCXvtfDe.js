import{m as J,d as K,e as tt}from"./CEUv4JL6.js";import{y as T,b9 as P,bS as z,aw as N,bT as et,ao as it,bc as E,o as nt,bQ as st,v as b,ap as j,aq as ot,ar as rt,as as at,bU as lt,an as L,bV as ut,bW as ct,r as O,bX as U,e as mt,bY as ht,A as R,bZ as dt,b_ as gt,B as p,n as ft,aC as X,p as q,z as pt,N as yt,w as vt,q as D,s as S}from"./BrO4EmHp.js";import{L as bt}from"./CFULkcCf.js";let C=0;function Ft(i){i?(C||document.body.classList.add("van-toast--unclickable"),C++):C&&(C--,C||document.body.classList.remove("van-toast--unclickable"))}const[St,V]=it("toast"),xt=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay","zIndex"],Dt={icon:String,show:Boolean,type:N("text"),overlay:Boolean,message:P,iconSize:P,duration:et(2e3),position:N("middle"),teleport:[String,Object],wordBreak:String,className:z,iconPrefix:String,transition:N("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:z,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean,zIndex:P};var Vt=T({name:St,props:Dt,emits:["update:show"],setup(i,{emit:t,slots:e}){let n,s=!1;const m=()=>{const o=i.show&&i.forbidClick;s!==o&&(s=o,Ft(s))},a=o=>t("update:show",o),c=()=>{i.closeOnClick&&a(!1)},u=()=>clearTimeout(n),h=()=>{const{icon:o,type:l,iconSize:f,iconPrefix:g,loadingType:v}=i;if(o||l==="success"||l==="fail")return b(at,{name:o||l,size:f,class:V("icon"),classPrefix:g},null);if(l==="loading")return b(bt,{class:V("loading"),size:f,type:v},null)},r=()=>{const{type:o,message:l}=i;if(e.message)return b("div",{class:V("text")},[e.message()]);if(lt(l)&&l!=="")return o==="html"?b("div",{key:0,class:V("text"),innerHTML:String(l)},null):b("div",{class:V("text")},[l])};return E(()=>[i.show,i.forbidClick],m),E(()=>[i.show,i.type,i.message,i.duration],()=>{u(),i.show&&i.duration>0&&(n=setTimeout(()=>{a(!1)},i.duration))}),nt(m),st(m),()=>b(rt,j({class:[V([i.position,i.wordBreak==="normal"?"break-normal":i.wordBreak,{[i.type]:!i.icon}]),i.className],lockScroll:!1,onClick:c,onClosed:u,"onUpdate:show":a},ot(i,xt)),{default:()=>[h(),r()]})}});const wt={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let _=[],Ct=!1,B=L({},wt);const Ot=new Map;function H(i){return ct(i)?i:{message:i}}function It(){const{instance:i}=J({setup(){const t=O(""),{open:e,state:n,close:s,toggle:m}=K(),a=()=>{},c=()=>b(Vt,j(n,{onClosed:a,"onUpdate:show":m}),null);return E(t,u=>{n.message=u}),U().render=c,{open:e,close:s,message:t}}});return i}function _t(){if(!_.length||Ct){const i=It();_.push(i)}return _[_.length-1]}function kt(i={}){if(!ut)return{};const t=_t(),e=H(i);return t.open(L({},B,Ot.get(e.type||B.type),e)),t}const A=i=>t=>kt(L({type:i},H(t))),Xt=A("loading"),qt=A("success"),Ht=A("fail");/**
 * Vue Currency Input 3.2.1
 * (c) 2018-2025 Matthias Stiller
 * @license MIT
 */var F;(function(i){i.symbol="symbol",i.narrowSymbol="narrowSymbol",i.code="code",i.name="name",i.hidden="hidden"})(F||(F={}));var y;(function(i){i.precision="precision",i.thousands="thousands",i.tenThousands="tenThousands",i.millions="millions",i.billions="billions"})(y||(y={}));const k=i=>i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Z=i=>i.replace(/^0+(0$|[^0])/,"$1"),$=(i,t)=>(i.match(new RegExp(k(t),"g"))||[]).length,Et=(i,t)=>i.substring(0,i.indexOf(t)),Q=[",",".","٫","。"],W="(0|[1-9]\\d*)";class Mt{constructor(t){var e,n,s,m,a,c;const{currency:u,currencyDisplay:h,locale:r,precision:o,accountingSign:l,useGrouping:f}=t;this.locale=r,this.options={currency:u,useGrouping:f,style:"currency",currencySign:l?"accounting":void 0,currencyDisplay:h!==F.hidden?h:void 0};const g=new Intl.NumberFormat(r,this.options),v=g.formatToParts(123456);this.currency=(e=v.find(({type:d})=>d==="currency"))===null||e===void 0?void 0:e.value,this.digits=[0,1,2,3,4,5,6,7,8,9].map(d=>d.toLocaleString(r)),this.decimalSymbol=(n=v.find(({type:d})=>d==="decimal"))===null||n===void 0?void 0:n.value,this.groupingSymbol=(s=v.find(({type:d})=>d==="group"))===null||s===void 0?void 0:s.value,this.minusSign=(m=g.formatToParts(-1).find(({type:d})=>d==="minusSign"))===null||m===void 0?void 0:m.value,this.decimalSymbol===void 0?this.minimumFractionDigits=this.maximumFractionDigits=0:typeof o=="number"?this.minimumFractionDigits=this.maximumFractionDigits=o:(this.minimumFractionDigits=(a=o==null?void 0:o.min)!==null&&a!==void 0?a:g.resolvedOptions().minimumFractionDigits,this.maximumFractionDigits=(c=o==null?void 0:o.max)!==null&&c!==void 0?c:g.resolvedOptions().maximumFractionDigits);const w=d=>Et(d,this.digits[1]),I=d=>d.substring(d.lastIndexOf(this.decimalSymbol?this.digits[0]:this.digits[1])+1);this.prefix=w(g.format(1)),this.suffix=I(g.format(1)),this.negativePrefix=w(g.format(-1)),this.negativeSuffix=I(g.format(-1))}parse(t){if(t){const e=this.isNegative(t);t=this.normalizeDigits(t),t=this.stripCurrency(t,e),t=this.stripSignLiterals(t);const n=this.decimalSymbol?`(?:${k(this.decimalSymbol)}(\\d*))?`:"",s=this.stripGroupingSeparator(t).match(new RegExp(`^${W}${n}$`));if(s&&this.isValidIntegerFormat(this.decimalSymbol?t.split(this.decimalSymbol)[0]:t,Number(s[1])))return+`${e?"-":""}${this.onlyDigits(s[1])}.${this.onlyDigits(s[2]||"")}`}return null}isValidIntegerFormat(t,e){const n={...this.options,minimumFractionDigits:0};return[this.stripCurrency(this.normalizeDigits(e.toLocaleString(this.locale,{...n,useGrouping:!0})),!1),this.stripCurrency(this.normalizeDigits(e.toLocaleString(this.locale,{...n,useGrouping:!1})),!1)].includes(t)}format(t,e={minimumFractionDigits:this.minimumFractionDigits,maximumFractionDigits:this.maximumFractionDigits}){return t!=null?t.toLocaleString(this.locale,{...this.options,...e}):""}toFraction(t){return`${this.digits[0]}${this.decimalSymbol}${this.onlyLocaleDigits(t.substring(1)).substring(0,this.maximumFractionDigits)}`}isFractionIncomplete(t){return!!this.normalizeDigits(this.stripGroupingSeparator(t)).match(new RegExp(`^${W}${k(this.decimalSymbol)}$`))}isNegative(t){return t.startsWith(this.negativePrefix)||this.minusSign===void 0&&(t.startsWith("(")||t.startsWith("-"))||this.minusSign!==void 0&&t.replace("-",this.minusSign).startsWith(this.minusSign)}insertCurrency(t,e){return`${e?this.negativePrefix:this.prefix}${t}${e?this.negativeSuffix:this.suffix}`}stripGroupingSeparator(t){return this.groupingSymbol!==void 0?t.replace(new RegExp(k(this.groupingSymbol),"g"),""):t}stripSignLiterals(t){return this.minusSign!==void 0?t.replace("-",this.minusSign).replace(this.minusSign,""):t.replace(/[-()]/g,"")}stripCurrency(t,e){return t.replace(e?this.negativePrefix:this.prefix,"").replace(e?this.negativeSuffix:this.suffix,"")}normalizeDecimalSeparator(t,e){return Q.forEach(n=>{t=t.substring(0,e)+t.substring(e).replace(n,this.decimalSymbol)}),t}normalizeDigits(t){return this.digits[0]!=="0"&&this.digits.forEach((e,n)=>{t=t.replace(new RegExp(e,"g"),String(n))}),t}onlyDigits(t){return this.normalizeDigits(t).replace(/\D+/g,"")}onlyLocaleDigits(t){return t.replace(new RegExp(`[^${this.digits.join("")}]*`,"g"),"")}}class Y{constructor(t){this.currencyFormat=t}}class Pt extends Y{conformToMask(t,e=""){const n=this.currencyFormat.isNegative(t),s=g=>g===""&&n&&!(this.currencyFormat.minusSign===void 0?e===this.currencyFormat.negativePrefix+this.currencyFormat.negativeSuffix:e===this.currencyFormat.negativePrefix),m=g=>{if(s(g))return"";if(this.currencyFormat.maximumFractionDigits>0){if(this.currencyFormat.isFractionIncomplete(g))return g;if(g.startsWith(this.currencyFormat.decimalSymbol))return this.currencyFormat.toFraction(g)}return null};let a=t;a=this.currencyFormat.stripCurrency(a,n),a=this.currencyFormat.stripSignLiterals(a);const c=m(a);if(c!=null)return this.currencyFormat.insertCurrency(c,n);const[u,...h]=a.split(this.currencyFormat.decimalSymbol),r=Z(this.currencyFormat.onlyDigits(u)),o=this.currencyFormat.onlyDigits(h.join("")).substring(0,this.currencyFormat.maximumFractionDigits),l=h.length>0&&o.length===0,f=r===""&&n&&(this.currencyFormat.minusSign===void 0?e===t.slice(0,-2)+this.currencyFormat.negativeSuffix:e===t.slice(0,-1));return l||f||s(r)?e:r.match(/\d+/)?{numberValue:+`${n?"-":""}${r}.${o}`,fractionDigits:o}:""}}class Nt extends Y{conformToMask(t,e=""){if(t===""||this.currencyFormat.parse(e)===0&&this.currencyFormat.stripCurrency(e,!0).slice(0,-1)===this.currencyFormat.stripCurrency(t,!0))return"";const n=this.currencyFormat.isNegative(t),s=this.currencyFormat.stripSignLiterals(t)===""?-0:+`${n?"-":""}${Z(this.currencyFormat.onlyDigits(t))}`/Math.pow(10,this.currencyFormat.maximumFractionDigits);return{numberValue:s,fractionDigits:s.toFixed(this.currencyFormat.maximumFractionDigits).slice(-this.currencyFormat.maximumFractionDigits)}}}const $t={locale:void 0,currency:void 0,currencyDisplay:void 0,hideGroupingSeparatorOnFocus:!0,hideCurrencySymbolOnFocus:!0,hideNegligibleDecimalDigitsOnFocus:!0,precision:void 0,autoDecimalDigits:!1,valueRange:void 0,useGrouping:void 0,valueScaling:void 0};class Rt{constructor(t){this.el=t.el,this.onInput=t.onInput,this.onChange=t.onChange,this.addEventListener(),this.init(t.options)}setOptions(t){this.init(t),this.format(this.currencyFormat.format(this.validateValueRange(this.numberValue))),this.onChange(this.getValue())}getValue(){return{number:this.valueScaling&&this.numberValue!=null?this.toInteger(this.numberValue,this.valueScaling):this.numberValue,formatted:this.formattedValue}}setValue(t){const e=this.valueScaling!==void 0&&t!=null?this.toFloat(t,this.valueScaling):t;e!==this.numberValue&&(this.format(this.currencyFormat.format(this.validateValueRange(e))),this.onChange(this.getValue()))}init(t){this.options={...$t,...t},this.options.autoDecimalDigits&&(this.options.hideNegligibleDecimalDigitsOnFocus=!1),this.el.getAttribute("inputmode")||this.el.setAttribute("inputmode",this.options.autoDecimalDigits?"numeric":"decimal"),this.currencyFormat=new Mt(this.options),this.numberMask=this.options.autoDecimalDigits?new Nt(this.currencyFormat):new Pt(this.currencyFormat);const e={[y.precision]:this.currencyFormat.maximumFractionDigits,[y.thousands]:3,[y.tenThousands]:4,[y.millions]:6,[y.billions]:9};this.valueScaling=this.options.valueScaling?e[this.options.valueScaling]:void 0,this.valueScalingFractionDigits=this.valueScaling!==void 0&&this.options.valueScaling!==y.precision?this.valueScaling+this.currencyFormat.maximumFractionDigits:this.currencyFormat.maximumFractionDigits,this.minValue=this.getMinValue(),this.maxValue=this.getMaxValue()}getMinValue(){var t,e;let n=this.toFloat(-Number.MAX_SAFE_INTEGER);return((t=this.options.valueRange)===null||t===void 0?void 0:t.min)!==void 0&&(n=Math.max((e=this.options.valueRange)===null||e===void 0?void 0:e.min,this.toFloat(-Number.MAX_SAFE_INTEGER))),n}getMaxValue(){var t,e;let n=this.toFloat(Number.MAX_SAFE_INTEGER);return((t=this.options.valueRange)===null||t===void 0?void 0:t.max)!==void 0&&(n=Math.min((e=this.options.valueRange)===null||e===void 0?void 0:e.max,this.toFloat(Number.MAX_SAFE_INTEGER))),n}toFloat(t,e){return t/Math.pow(10,e??this.valueScalingFractionDigits)}toInteger(t,e){return Number(t.toFixed(e??this.valueScalingFractionDigits).split(".").join(""))}validateValueRange(t){return t!=null?Math.min(Math.max(t,this.minValue),this.maxValue):t}format(t,e=!1){if(t!=null){this.decimalSymbolInsertedAt!==void 0&&(t=this.currencyFormat.normalizeDecimalSeparator(t,this.decimalSymbolInsertedAt),this.decimalSymbolInsertedAt=void 0);const n=this.numberMask.conformToMask(t,this.formattedValue);let s;if(typeof n=="object"){const{numberValue:m,fractionDigits:a}=n;let{maximumFractionDigits:c,minimumFractionDigits:u}=this.currencyFormat;this.focus?u=e?a.replace(/0+$/,"").length:Math.min(c,a.length):Number.isInteger(m)&&!this.options.autoDecimalDigits&&(this.options.precision===void 0||u===0)&&(u=c=0),s=this.toInteger(Math.abs(m))>Number.MAX_SAFE_INTEGER?this.formattedValue:this.currencyFormat.format(m,{useGrouping:this.options.useGrouping!==!1&&!(this.focus&&this.options.hideGroupingSeparatorOnFocus),minimumFractionDigits:u,maximumFractionDigits:c})}else s=n;this.maxValue<=0&&!this.currencyFormat.isNegative(s)&&this.currencyFormat.parse(s)!==0&&(s=s.replace(this.currencyFormat.prefix,this.currencyFormat.negativePrefix)),this.minValue>=0&&(s=s.replace(this.currencyFormat.negativePrefix,this.currencyFormat.prefix)),(this.options.currencyDisplay===F.hidden||this.focus&&this.options.hideCurrencySymbolOnFocus)&&(s=s.replace(this.currencyFormat.negativePrefix,this.currencyFormat.minusSign!==void 0?this.currencyFormat.minusSign:"(").replace(this.currencyFormat.negativeSuffix,this.currencyFormat.minusSign!==void 0?"":")").replace(this.currencyFormat.prefix,"").replace(this.currencyFormat.suffix,"")),this.el.value=s,this.numberValue=this.currencyFormat.parse(s)}else this.el.value="",this.numberValue=null;this.formattedValue=this.el.value,this.onInput(this.getValue())}addEventListener(){this.el.addEventListener("input",t=>{const{value:e,selectionStart:n}=this.el,s=t;if(n&&s.data&&Q.includes(s.data)&&(this.decimalSymbolInsertedAt=n-1),this.format(e),this.focus&&n!=null){const m=()=>{const{prefix:a,suffix:c,decimalSymbol:u,maximumFractionDigits:h,groupingSymbol:r}=this.currencyFormat;let o=e.length-n;const l=this.formattedValue.length;if(this.currencyFormat.minusSign===void 0&&(e.startsWith("(")||e.startsWith("-"))&&!e.endsWith(")"))return l-this.currencyFormat.negativeSuffix.length>1?this.formattedValue.substring(n).length:1;if(this.formattedValue.substring(n,1)===r&&$(this.formattedValue,r)===$(e,r)+1)return l-o-1;if(l<o)return n;if(u!==void 0&&e.indexOf(u)!==-1){const f=e.indexOf(u)+1;if(Math.abs(l-e.length)>1&&n<=f)return this.formattedValue.indexOf(u)+1;!this.options.autoDecimalDigits&&n>f&&this.currencyFormat.onlyDigits(e.substring(f)).length-1===h&&(o-=1)}return this.options.hideCurrencySymbolOnFocus||this.options.currencyDisplay===F.hidden?l-o:Math.max(l-Math.max(o,c.length),a.length)};this.setCaretPosition(m())}}),this.el.addEventListener("focus",()=>{this.focus=!0,this.numberValueOnFocus=this.numberValue,setTimeout(()=>{const{value:t,selectionStart:e,selectionEnd:n}=this.el;if(this.format(t,this.options.hideNegligibleDecimalDigitsOnFocus),e!=null&&n!=null&&Math.abs(e-n)>0)this.setCaretPosition(0,this.el.value.length);else if(e!=null){const s=this.getCaretPositionOnFocus(t,e);this.setCaretPosition(s)}})}),this.el.addEventListener("blur",()=>{this.focus=!1,this.format(this.currencyFormat.format(this.validateValueRange(this.numberValue))),this.numberValueOnFocus!==this.numberValue&&this.onChange(this.getValue())})}getCaretPositionOnFocus(t,e){if(this.numberValue==null)return e;const{prefix:n,negativePrefix:s,suffix:m,negativeSuffix:a,groupingSymbol:c,currency:u}=this.currencyFormat,h=this.numberValue<0,r=h?s:n,o=r.length;if(this.options.hideCurrencySymbolOnFocus||this.options.currencyDisplay===F.hidden){if(h){if(e<=1)return 1;if(t.endsWith(")")&&e>t.indexOf(")"))return this.formattedValue.length-1}}else{const f=h?a.length:m.length;if(e>=t.length-f)return this.formattedValue.length-f;if(e<o)return o}let l=e;return this.options.hideCurrencySymbolOnFocus&&this.options.currencyDisplay!==F.hidden&&e>=o&&u!==void 0&&r.includes(u)&&(l-=o,h&&(l+=1)),this.options.hideGroupingSeparatorOnFocus&&c!==void 0&&(l-=$(t.substring(0,e),c)),l}setCaretPosition(t,e=t){this.el.setSelectionRange(t,e)}}const Tt=i=>i!=null&&i.matches("input")?i:i==null?void 0:i.querySelector("input");function Lt(i,t){var e,n,s,m;let a;const c=O(null),u=O(null),h=O(null),r=U(),o=(r==null?void 0:r.emit)||((n=(e=r==null?void 0:r.proxy)===null||e===void 0?void 0:e.$emit)===null||n===void 0?void 0:n.bind(r==null?void 0:r.proxy)),l=(r==null?void 0:r.props)||((s=r==null?void 0:r.proxy)===null||s===void 0?void 0:s.$props),f=ht.startsWith("3"),g=f&&((m=r==null?void 0:r.attrs.modelModifiers)===null||m===void 0?void 0:m.lazy),v=mt(()=>l==null?void 0:l[f?"modelValue":"value"]),w=f?"update:modelValue":"input",I=g?"update:modelValue":"change";return E(c,d=>{var M;if(d){const G=Tt((M=d==null?void 0:d.$el)!==null&&M!==void 0?M:d);G?(a=new Rt({el:G,options:i,onInput:x=>{!g&&t!==!1&&v.value!==x.number&&(o==null||o(w,x.number)),h.value=x.number,u.value=x.formatted},onChange:x=>{o==null||o(I,x.number)}}),a.setValue(v.value)):console.error('No input element found. Please make sure that the "inputRef" template ref is properly assigned.')}else a=null}),{inputRef:c,numberValue:h,formattedValue:u,setValue:d=>a==null?void 0:a.setValue(d),setOptions:d=>a==null?void 0:a.setOptions(d)}}const At=["placeholder","type"],Gt=T({__name:"CurrencyInput",props:{options:{},modelValue:{},placeholder:{},type:{}},setup(i,{expose:t}){const e=i,n={currency:"USD",currencyDisplay:F.hidden,autoDecimalDigits:!1,useGrouping:!1,hideCurrencySymbolOnFocus:!0,hideGroupingSeparatorOnFocus:!0,hideNegligibleDecimalDigitsOnFocus:!0,valueRange:{min:0,max:10**9},precision:{min:0,max:0},valueScaling:y.precision,accountingSign:!1},{inputRef:s,setOptions:m,setValue:a,formattedValue:c}=Lt({...n,...e.options});return R(()=>{a(Number(e.modelValue))}),R(()=>{m({...n,...e.options})}),t({setValue:a}),(u,h)=>dt((q(),ft("input",{ref_key:"inputRef",ref:s,focus:"","onUpdate:modelValue":h[0]||(h[0]=r=>X(c)?c.value=r:null),placeholder:u.placeholder,type:u.type||"text"},null,8,At)),[[gt,p(c)]])}}),zt={class:"text-sm text-gray-400 mt-2 px-3"},Bt={class:"flex justify-between my-4 mx-3 border border-white/20 rounded-lg py-1 px-2"},Zt=T({__name:"approveDialog",props:{show:{type:Boolean},address:{},amount:{},approve:{type:Function}},emits:["update:show"],setup(i,{emit:t}){const{t:e}=pt(),n=i,s=O(null);R(()=>s.value=n.amount);const m=t,a=()=>{m("update:show",!1)},c=async()=>{try{a(),await n.approve(s.value||n.amount)}catch(u){console.error(e("授权失败")+":",u)}};return(u,h)=>{const r=Gt,o=tt;return q(),yt(o,{show:u.show,title:p(e)("授权"),"show-cancel-button":"",onCancel:h[2]||(h[2]=l=>a()),onConfirm:c},{default:vt(()=>[D("div",zt,[D("p",null,S(p(e)("授权是允许智能合约代表您使用一定数量的代币"))+"。",1),D("p",null,S(p(e)("点击"))+'"Max"'+S(p(e)("授权最大额度"))+"，"+S(p(e)("未来交易将无需重复授权"))+"，"+S(p(e)("节省"))+"Gas"+S(p(e)("费用"))+"。",1),D("p",null,S(p(e)("您可以随时撤销或修改授权额度"))+"。",1)]),D("div",Bt,[b(r,{modelValue:p(s),"onUpdate:modelValue":h[0]||(h[0]=l=>X(s)?s.value=l:null),class:"bg-transparent",placeholder:p(e)("请输入授权额度")},null,8,["modelValue","placeholder"]),D("button",{onClick:h[1]||(h[1]=l=>s.value=10**9),class:"h-[22px] text-xs bg-white text-black rounded px-2 py-1"},"Max")])]),_:1},8,["show","title"])}}});export{Gt as _,Zt as a,qt as b,Xt as c,Vt as d,Ht as s};
