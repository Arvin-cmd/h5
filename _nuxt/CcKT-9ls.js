var G=t=>{throw TypeError(t)};var W=(t,e,n)=>e.has(t)||G("Cannot "+n);var u=(t,e,n)=>(W(t,e,"read from private field"),n?n.call(t):e.get(t)),E=(t,e,n)=>e.has(t)?G("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),k=(t,e,n,o)=>(W(t,e,"write to private field"),o?o.call(t,n):e.set(t,n),n),A=(t,e,n)=>(W(t,e,"access private method"),n);import{d2 as _,dR as $,dK as N,cA as Y,e5 as bt,c_ as h,eq as j,eE as Ct,dJ as P,g1 as yt,dO as wt,ej as vt,dS as R,e3 as st,ek as Bt,cB as O,ei as at,g2 as pt,dW as J,g3 as xt,dL as rt,dM as St,es as Ot,dN as Pt,dQ as It,ez as Et,g4 as X,g5 as kt,g6 as At,g7 as Tt,g8 as Rt,dV as Dt,eC as Mt,fd as $t,fg as Kt,g9 as Z,ga as _t,fq as Nt,cu as jt,cv as Lt,gb as zt,fu as Ut,fv as qt,fw as Ft,e6 as tt,fx as it,fz as Ht,fA as ct,fB as Wt,fy as Vt,gc as L,gd as Qt,bn as Yt,j as Jt,l as Gt,ge as Xt,d9 as lt,cz as Zt,fY as te,d3 as ee}from"./BWftuhBA.js";import{u as ne,L as oe,t as se,c as ae}from"./Btxg4FkC.js";const[ut,et]=N("action-bar"),dt=Symbol(ut),re={placeholder:Boolean,safeAreaInsetBottom:$};var ie=_({name:ut,props:re,setup(t,{slots:e}){const n=Y(),o=ne(n,et),{linkChildren:s}=bt(dt);s();const r=()=>{var i;return h("div",{ref:n,class:[et(),{"van-safe-area-bottom":t.safeAreaInsetBottom}]},[(i=e.default)==null?void 0:i.call(e)])};return()=>t.placeholder?o(r):r()}});const ce=j(ie),ht={to:[String,Object],url:String,replace:Boolean};function le({to:t,url:e,replace:n,$router:o}){t&&o?o[n?"replace":"push"](t):e&&(n?location.replace(e):location.href=e)}function ft(){const t=Ct().proxy;return()=>le(t)}const[ue,T]=N("button"),de=P({},ht,{tag:R("button"),text:String,icon:String,type:R("default"),size:R("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:R("button"),loadingSize:st,loadingText:String,loadingType:String,iconPosition:R("left")});var he=_({name:ue,props:de,emits:["click"],setup(t,{emit:e,slots:n}){const o=ft(),s=()=>n.loading?n.loading():h(oe,{size:t.loadingSize,type:t.loadingType,class:T("loading")},null),r=()=>{if(t.loading)return s();if(n.icon)return h("div",{class:T("icon")},[n.icon()]);if(t.icon)return h(wt,{name:t.icon,class:T("icon"),classPrefix:t.iconPrefix},null)},i=()=>{let a;if(t.loading?a=t.loadingText:a=n.default?n.default():t.text,a)return h("span",{class:T("text")},[a])},d=()=>{const{color:a,plain:l}=t;if(a){const f={color:l?a:"white"};return l||(f.background=a),a.includes("gradient")?f.border=0:f.borderColor=a,f}},m=a=>{t.loading?vt(a):t.disabled||(e("click",a),o())};return()=>{const{tag:a,type:l,size:f,block:C,round:z,plain:U,square:q,loading:F,disabled:c,hairline:g,nativeType:v,iconPosition:y}=t,I=[T([l,f,{plain:U,block:C,round:z,square:q,loading:F,disabled:c,hairline:g}]),{[yt]:g}];return h(a,{type:v,class:I,style:d(),disabled:c,onClick:m},{default:()=>[h("div",{class:T("content")},[y==="left"&&r(),i(),y==="right"&&r()])]})}}});const V=j(he),[fe,ge]=N("action-bar-button"),me=P({},ht,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var be=_({name:fe,props:me,setup(t,{slots:e}){const n=ft(),{parent:o,index:s}=Bt(dt),r=O(()=>{if(o){const d=o.children[s.value-1];return!(d&&"isButton"in d)}}),i=O(()=>{if(o){const d=o.children[s.value+1];return!(d&&"isButton"in d)}});return at({isButton:!0}),()=>{const{type:d,icon:m,text:a,color:l,loading:f,disabled:C}=t;return h(V,{class:ge([d,{last:i.value,first:r.value}]),size:"large",type:d,icon:m,color:l,loading:f,disabled:C,onClick:n},{default:()=>[e.default?e.default():a]})}}});const nt=j(be);function Ce(){const t=J({show:!1}),e=s=>{t.show=s},n=s=>{P(t,s,{transitionAppear:!0}),e(!0)},o=()=>e(!1);return at({open:n,close:o,toggle:e}),{open:n,close:o,state:t,toggle:e}}function ye(t){const e=pt(t),n=document.createElement("div");return document.body.appendChild(n),{instance:e.mount(n),unmount(){e.unmount(),document.body.removeChild(n)}}}const[we,w,M]=N("dialog"),ve=P({},It,{title:String,theme:String,width:st,message:[String,Function],callback:Function,allowHtml:Boolean,className:Et,transition:R("van-dialog-bounce"),messageAlign:String,closeOnPopstate:$,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:$,closeOnClickOverlay:Boolean,keyboardEnabled:$,destroyOnClose:Boolean}),Be=[...Dt,"transition","closeOnPopstate","destroyOnClose"];var gt=_({name:we,props:ve,emits:["confirm","cancel","keydown","update:show"],setup(t,{emit:e,slots:n}){const o=Y(),s=J({confirm:!1,cancel:!1}),r=c=>e("update:show",c),i=c=>{var g;r(!1),(g=t.callback)==null||g.call(t,c)},d=c=>()=>{t.show&&(e(c),t.beforeClose?(s[c]=!0,Rt(t.beforeClose,{args:[c],done(){i(c),s[c]=!1},canceled(){s[c]=!1}})):i(c))},m=d("cancel"),a=d("confirm"),l=xt(c=>{var g,v;if(!t.keyboardEnabled||c.target!==((v=(g=o.value)==null?void 0:g.popupRef)==null?void 0:v.value))return;({Enter:t.showConfirmButton?a:X,Escape:t.showCancelButton?m:X})[c.key](),e("keydown",c)},["enter","esc"]),f=()=>{const c=n.title?n.title():t.title;if(c)return h("div",{class:w("header",{isolated:!t.message&&!n.default})},[c])},C=c=>{const{message:g,allowHtml:v,messageAlign:y}=t,I=w("message",{"has-title":c,[y]:y}),H=kt(g)?g():g;return v&&typeof H=="string"?h("div",{class:I,innerHTML:H},null):h("div",{class:I},[H])},z=()=>{if(n.default)return h("div",{class:w("content")},[n.default()]);const{title:c,message:g,allowHtml:v}=t;if(g){const y=!!(c||n.title);return h("div",{key:v?1:0,class:w("content",{isolated:!y})},[C(y)])}},U=()=>h("div",{class:[Tt,w("footer")]},[t.showCancelButton&&h(V,{size:"large",text:t.cancelButtonText||M("cancel"),class:w("cancel"),style:{color:t.cancelButtonColor},loading:s.cancel,disabled:t.cancelButtonDisabled,onClick:m},null),t.showConfirmButton&&h(V,{size:"large",text:t.confirmButtonText||M("confirm"),class:[w("confirm"),{[At]:t.showCancelButton}],style:{color:t.confirmButtonColor},loading:s.confirm,disabled:t.confirmButtonDisabled,onClick:a},null)]),q=()=>h(ce,{class:w("footer")},{default:()=>[t.showCancelButton&&h(nt,{type:"warning",text:t.cancelButtonText||M("cancel"),class:w("cancel"),color:t.cancelButtonColor,loading:s.cancel,disabled:t.cancelButtonDisabled,onClick:m},null),t.showConfirmButton&&h(nt,{type:"danger",text:t.confirmButtonText||M("confirm"),class:w("confirm"),color:t.confirmButtonColor,loading:s.confirm,disabled:t.confirmButtonDisabled,onClick:a},null)]}),F=()=>n.footer?n.footer():t.theme==="round-button"?q():U();return()=>{const{width:c,title:g,theme:v,message:y,className:I}=t;return h(Pt,rt({ref:o,role:"dialog",class:[w([v]),I],style:{width:Ot(c)},tabindex:0,"aria-labelledby":g||y,onKeydown:l,"onUpdate:show":r},St(t,Be)),{default:()=>[f(),z(),F()]})}}});let D;const pe={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1,destroyOnClose:!1};let xe=P({},pe);function Se(){({instance:D}=ye({setup(){const{state:e,toggle:n}=Ce();return()=>h(gt,rt(e,{"onUpdate:show":n}),null)}}))}function Oe(t){return Mt?new Promise((e,n)=>{D||Se(),D.open(P({},xe,t,{callback:o=>{(o==="confirm"?e:n)(o)}}))}):Promise.resolve(void 0)}const Pe=t=>Oe(P({showCancelButton:!0},t)),qe=()=>{D&&D.toggle(!1)};j(gt);var B,S,b,p,x,K,Q,ot,Ie=(ot=class extends $t{constructor(e,n){super();E(this,x);E(this,B);E(this,S);E(this,b);E(this,p);k(this,B,e),this.setOptions(n),this.bindMethods(),A(this,x,K).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var o;const n=this.options;this.options=u(this,B).defaultMutationOptions(e),Kt(this.options,n)||u(this,B).getMutationCache().notify({type:"observerOptionsUpdated",mutation:u(this,b),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Z(n.mutationKey)!==Z(this.options.mutationKey)?this.reset():((o=u(this,b))==null?void 0:o.state.status)==="pending"&&u(this,b).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(e=u(this,b))==null||e.removeObserver(this)}onMutationUpdate(e){A(this,x,K).call(this),A(this,x,Q).call(this,e)}getCurrentResult(){return u(this,S)}reset(){var e;(e=u(this,b))==null||e.removeObserver(this),k(this,b,void 0),A(this,x,K).call(this),A(this,x,Q).call(this)}mutate(e,n){var o;return k(this,p,n),(o=u(this,b))==null||o.removeObserver(this),k(this,b,u(this,B).getMutationCache().build(u(this,B),this.options)),u(this,b).addObserver(this),u(this,b).execute(e)}},B=new WeakMap,S=new WeakMap,b=new WeakMap,p=new WeakMap,x=new WeakSet,K=function(){var n;const e=((n=u(this,b))==null?void 0:n.state)??_t();k(this,S,{...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset})},Q=function(e){Nt.batch(()=>{var n,o,s,r,i,d,m,a;if(u(this,p)&&this.hasListeners()){const l=u(this,S).variables,f=u(this,S).context,C={client:u(this,B),meta:this.options.meta,mutationKey:this.options.mutationKey};(e==null?void 0:e.type)==="success"?((o=(n=u(this,p)).onSuccess)==null||o.call(n,e.data,l,f,C),(r=(s=u(this,p)).onSettled)==null||r.call(s,e.data,null,l,f,C)):(e==null?void 0:e.type)==="error"&&((d=(i=u(this,p)).onError)==null||d.call(i,e.error,l,f,C),(a=(m=u(this,p)).onSettled)==null||a.call(m,void 0,e.error,l,f,C))}this.listeners.forEach(l=>{l(u(this,S))})})},ot);function Ee(t=""){if(!jt())throw new Error("vue-query hooks can only be used inside setup() function or functions that support injection context.");const e=zt(t),n=Lt(e);if(!n)throw new Error("No 'queryClient' found in Vue context, use 'VueQueryPlugin' to properly initialize the library.");return n}function ke(t,e){const n=Ee(),o=O(()=>n.defaultMutationOptions(Ut(t))),s=new Ie(n,o.value),r=o.value.shallow?qt(s.getCurrentResult()):J(s.getCurrentResult()),i=s.subscribe(l=>{Ft(r,l)}),d=(l,f)=>{s.mutate(l,f).catch(()=>{})};tt(o,()=>{s.setOptions(o.value)}),it(()=>{i()});const m=o.value.shallow?Ht(r):ct(r),a=Wt(m);return tt(()=>r.error,l=>{if(l&&Vt(o.value.throwOnError,[l]))throw l}),{...a,mutate:d,mutateAsync:r.mutate,reset:r.reset}}function Ae(t,e,n){const o=t[e.name];if(typeof o=="function")return o;const s=t[n];return typeof s=="function"?s:r=>e(t,r)}class Te extends L{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class Re extends L{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class De extends L{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class Me extends L{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function $e(t,e={}){let n;if(e.connector){const{connector:a}=e;if(t.state.status==="reconnecting"&&!a.getAccounts&&!a.getChainId)throw new Me({connector:a});const[l,f]=await Promise.all([a.getAccounts().catch(C=>{if(e.account===null)return[];throw C}),a.getChainId()]);n={accounts:l,chainId:f,connector:a}}else n=t.state.connections.get(t.state.current);if(!n)throw new Te;const o=e.chainId??n.chainId,s=await n.connector.getChainId();if(s!==n.chainId)throw new De({connectionChainId:n.chainId,connectorChainId:s});const r=n.connector;if(r.getClient)return r.getClient({chainId:o});const i=Qt(e.account??n.accounts[0]);if(i&&(i.address=Yt(i.address)),e.account&&!n.accounts.some(a=>a.toLowerCase()===i.address.toLowerCase()))throw new Re({address:i.address,connector:r});const d=t.chains.find(a=>a.id===o),m=await n.connector.getProvider({chainId:o});return Jt({account:i,chain:d,name:"Connector Client",transport:a=>Gt(m)({...a,retryCount:0})})}function Ke(t){return t.state.chainId}function _e(t,e){const{onChange:n}=e;return t.subscribe(o=>o.chainId,n)}async function Ne(t,e){const{account:n,chainId:o,connector:s,...r}=e;let i;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?i=t.getClient({chainId:o}):i=await $e(t,{account:n??void 0,chainId:o,connector:s}),await Ae(i,Xt,"writeContract")({...r,...n?{account:n}:{},chain:o?{id:o}:null})}function je(t){return{mutationFn(e){return Ne(t,e)},mutationKey:["writeContract"]}}function mt(t={}){const e=lt(t),n=Y(Ke(e)),o=_e(e,{onChange(s){n.value=s}});return it(()=>o()),ct(n)}function Fe(t={}){const{mutation:e}=t,n=lt(t),o=je(n),{mutate:s,mutateAsync:r,...i}=ke({...e,...o});return{...i,writeContract:s,writeContractAsync:r}}const He=t=>{const e=mt();return O(()=>ae[t][e.value])},We=()=>{const t=mt(),e=O(()=>se.filter(s=>s.chainId===t.value)),n=O(()=>e.value.reduce((s,r)=>(s[r==null?void 0:r.symbol]=r,s),{})),o=O(()=>e.value.reduce((s,r)=>(s[r.address]=r,s),{}));return{tokenList:e,tokenMap:n,tokenAddressMap:o}},Ve=()=>{const{address:t}=Zt(),{open:e}=te(),{t:n}=ee();return{connect:async()=>{if(!t.value)throw Pe({title:n("温馨提醒"),message:n("检测到您未连接钱包")+"，"+n("请先连接钱包"),confirmButtonText:n("连接钱包")}).then(()=>{e()}),new Error(n("请先连接钱包"))}}};export{Ve as a,ke as b,Pe as c,qe as d,Ce as e,gt as f,He as g,Ee as h,ye as m,he as s,We as t,Fe as u};
