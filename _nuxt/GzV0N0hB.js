import{_ as q}from"./Btxg4FkC.js";import{u as z,s as M,a as V,b as W}from"./gFEFojss.js";import{d2 as D,d3 as K,dc as O,dd as Q,cB as X,cW as r,c_ as p,cY as s,d5 as e,c$ as x,de as C,d6 as m,d7 as N,cZ as l,df as Y,dg as Z,cX as c}from"./BWftuhBA.js";import{t as G,s as J}from"./CcKT-9ls.js";import{o as U,a as ee}from"./CFtiEey3.js";import{u as se}from"./DdryT4cB.js";import{u as te}from"./1p_STghO.js";import"./DlAUqK2U.js";const oe={class:"h-screen flex flex-col"},ne={class:"flex-1 overflow-auto px-3 mt-4"},ae=["onClick"],le={class:"relative"},ce={class:"py-2 px-3 home-bg flex justify-between"},re=["onClick"],de={class:"px-3 py-2 flex"},ie=["src"],ue={class:"pl-3 text-sm text-white/80 flex-1"},_e={class:"flex items-center justify-between"},pe={class:"font-bold text-base"},fe={class:"flex items-center justify-between"},he={class:"font-bold text-base"},xe={class:"flex justify-end mt-1"},me={class:"px-4"},g=20,$e=D({__name:"record",setup(ge){const{t:n}=K(),{openExplorer:B}=U(),{betRecord:d}=O(te()),$=se(),{tokenAddressMap:F}=G(),R=Q(),{data:v,refetch:I,isRefetching:j,isFetching:A,hasNextPage:H,fetchNextPage:L}=z({queryKey:X(()=>["getAuctionsInfo",d.value.length]),refetchOnWindowFocus:!1,initialPageParam:1,getNextPageParam:o=>o.nextCursor,queryFn:async({pageParam:o=1})=>{const f=(o-1)*g,i=d.value.slice(f,o*g);if(!i.length)return{list:[],nextCursor:void 0};const u=await $.getAuctionsInfo(i.map(a=>BigInt(a))),_={list:u.map((a,h)=>({id:Number(d.value[f+h]),user:a.user,award:a.award,total:Number(a.total),pour:Number(a.pour)}))??[],nextCursor:void 0};return(o-1)*Number(g)+u.length<d.value.length&&(_.nextCursor=o+1),_}});return(o,f)=>{const i=q,u=V,_=Z,b=J,a=W,h=M;return c(),r("div",oe,[p(i,{title:e(n)("下注记录")},null,8,["title"]),s("div",ne,[p(h,{"model-value":e(j),onRefresh:e(I)},{default:x(()=>{var k,y;return[((y=(k=e(v))==null?void 0:k.pages[0])==null?void 0:y.list.length)===0?(c(),C(u,{key:0,image:"/empty.png",description:e(n)("暂无竞拍")},null,8,["description"])):(c(),C(a,{key:1,loading:e(A),finished:!e(H),"loading-text":e(n)("加载中")+"...","finished-text":e(n)("没有更多了"),onLoad:e(L)},{default:x(()=>{var w;return[(c(!0),r(m,null,N((w=e(v))==null?void 0:w.pages,(E,P)=>(c(),r(m,{key:P},[(c(!0),r(m,null,N(E.list,(t,S)=>(c(),r("div",{key:S,class:"mb-3 bg-[#2A2B30] rounded-lg border-bg",onClick:T=>e(R).push(`/auction/info?id=${t.id}`)},[s("div",le,[s("div",ce,[s("span",null,"# "+l(t.id),1),s("span",{onClick:Y(T=>e(B)("address",t==null?void 0:t.award),["stop"])},[s("span",null,l(e(n)("奖品"))+": "+l(("addressFl"in o?o.addressFl:e(ee))(t==null?void 0:t.award)),1),p(_,{"class-prefix":"iconfont icon-jump text-white/60 ml-1"})],8,re)]),s("div",de,[s("div",null,[s("img",{class:"w-20 h-20",src:e(F)[t.award].icon,alt:""},null,8,ie)]),s("div",ue,[s("div",_e,[s("span",null,l(e(n)("总筹码")),1),s("span",pe,l(t.total),1)]),s("div",fe,[s("span",null,l(e(n)("已下注")),1),s("span",he,l(t.pour),1)]),s("div",xe,[p(b,{color:"#77dee8",plain:"",size:"mini",round:""},{default:x(()=>[s("span",me,l(e(n)("详情")),1)]),_:1})])])])])],8,ae))),128))],64))),128))]}),_:1},8,["loading","finished","loading-text","finished-text","onLoad"]))]}),_:1},8,["model-value","onRefresh"])])])}}});export{$e as default};
