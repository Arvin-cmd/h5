import{_ as T}from"./Ca0hXmEk.js";import{a as q,s as D,b as M,c as V}from"./C5NygYla.js";import{e as G,u as K,ax as O,ad as Q,x as W,c as i,b as p,a as t,z as e,w as x,D as C,F as m,G as N,t as a,A as J,B as U,o as r}from"./CTDKT58D.js";import{t as X,a as Y}from"./D6XtwinG.js";import{o as Z,a as ee}from"./BWatM3ct.js";import{u as te}from"./CCsL0Z-x.js";import{u as se}from"./Dfol5pQH.js";import"./DlAUqK2U.js";import"./CSF6aMVe.js";const oe={class:"h-screen flex flex-col"},ne={class:"flex-1 overflow-auto px-3 mt-4"},ae=["onClick"],le={class:"relative"},re={class:"py-2 px-3 home-bg flex justify-between"},ie=["onClick"],ce={class:"px-3 py-2 flex"},de=["src"],ue={class:"pl-3 text-sm text-white/80 flex-1"},_e={class:"flex items-center justify-between"},pe={class:"font-bold text-base"},fe={class:"flex items-center justify-between"},he={class:"font-bold text-base"},xe={class:"flex justify-end mt-1"},me={class:"px-4"},g=20,$e=G({__name:"record",setup(ge){const{t:o}=K(),{openExplorer:B}=Z(),{betRecord:c}=O(se()),R=te(),{tokenAddressMap:$}=X(),A=Q(),{data:v,refetch:F,isRefetching:I,isFetching:j,hasNextPage:H,fetchNextPage:L}=q({queryKey:W(()=>["getAuctionsInfo",c.value.length]),refetchOnWindowFocus:!1,initialPageParam:1,getNextPageParam:l=>l.nextCursor,queryFn:async({pageParam:l=1})=>{const f=(l-1)*g,d=c.value.slice(f,l*g);if(!d.length)return{list:[],nextCursor:void 0};const u=await R.getAuctionsInfo(d.map(n=>BigInt(n))),_={list:u.map((n,h)=>({id:Number(c.value[f+h]),user:n.user,award:n.award,total:Number(n.total),pour:Number(n.pour)}))??[],nextCursor:void 0};return(l-1)*Number(g)+u.length<c.value.length&&(_.nextCursor=l+1),_}});return(l,f)=>{const d=T,u=M,_=U,b=Y,n=V,h=D;return r(),i("div",oe,[p(d,{title:e(o)("下注记录")},null,8,["title"]),t("div",ne,[p(h,{"model-value":e(I),onRefresh:e(F)},{default:x(()=>{var k,y;return[((y=(k=e(v))==null?void 0:k.pages[0])==null?void 0:y.list.length)===0?(r(),C(u,{key:0,image:"/empty.png",description:e(o)("暂无竞拍")},null,8,["description"])):(r(),C(n,{key:1,loading:e(j),finished:!e(H),"loading-text":e(o)("加载中")+"...","finished-text":e(o)("没有更多了"),onLoad:e(L)},{default:x(()=>{var w;return[(r(!0),i(m,null,N((w=e(v))==null?void 0:w.pages,(z,E)=>(r(),i(m,{key:E},[(r(!0),i(m,null,N(z.list,(s,P)=>(r(),i("div",{key:P,class:"mb-3 bg-[#2A2B30] rounded-lg border-bg",onClick:S=>e(A).push(`/auction/info?id=${s.id}`)},[t("div",le,[t("div",re,[t("span",null,"# "+a(s.id),1),t("span",{onClick:J(S=>e(B)("address",s==null?void 0:s.award),["stop"])},[t("span",null,a(e(o)("奖品"))+": "+a(e(ee)(s==null?void 0:s.award)),1),p(_,{"class-prefix":"iconfont icon-jump text-white/60 ml-1"})],8,ie)]),t("div",ce,[t("div",null,[t("img",{class:"w-20 h-20",src:e($)[s.award].icon,alt:""},null,8,de)]),t("div",ue,[t("div",_e,[t("span",null,a(e(o)("总筹码")),1),t("span",pe,a(s.total),1)]),t("div",fe,[t("span",null,a(e(o)("已下注")),1),t("span",he,a(s.pour),1)]),t("div",xe,[p(b,{color:"#77dee8",plain:"",size:"mini",round:""},{default:x(()=>[t("span",me,a(e(o)("详情")),1)]),_:1})])])])])],8,ae))),128))],64))),128))]}),_:1},8,["loading","finished","loading-text","finished-text","onLoad"]))]}),_:1},8,["model-value","onRefresh"])])])}}});export{$e as default};
