import{r as _,c as G,ay as T,az as k,aA as z,v as w,aB as N,aC as W,aD as B,y as f,m as j,ax as C,o as R,x as X,I as U,w as q,n as S,p as F,q as H}from"./CkWz8_Cg.js";import{d as Z}from"./DunmbgP4.js";import"./D9OwVK97.js";/**
 * Vue Currency Input 3.2.1
 * (c) 2018-2025 Matthias Stiller
 * @license MIT
 */var v;(function(s){s.symbol="symbol",s.narrowSymbol="narrowSymbol",s.code="code",s.name="name",s.hidden="hidden"})(v||(v={}));var y;(function(s){s.precision="precision",s.thousands="thousands",s.tenThousands="tenThousands",s.millions="millions",s.billions="billions"})(y||(y={}));const E=s=>s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),P=s=>s.replace(/^0+(0$|[^0])/,"$1"),M=(s,i)=>(s.match(new RegExp(E(i),"g"))||[]).length,J=(s,i)=>s.substring(0,s.indexOf(i)),A=[",",".","٫","。"],$="(0|[1-9]\\d*)";class K{constructor(i){var t,e,n,d,o,c;const{currency:u,currencyDisplay:l,locale:r,precision:a,accountingSign:h,useGrouping:p}=i;this.locale=r,this.options={currency:u,useGrouping:p,style:"currency",currencySign:h?"accounting":void 0,currencyDisplay:l!==v.hidden?l:void 0};const g=new Intl.NumberFormat(r,this.options),b=g.formatToParts(123456);this.currency=(t=b.find(({type:m})=>m==="currency"))===null||t===void 0?void 0:t.value,this.digits=[0,1,2,3,4,5,6,7,8,9].map(m=>m.toLocaleString(r)),this.decimalSymbol=(e=b.find(({type:m})=>m==="decimal"))===null||e===void 0?void 0:e.value,this.groupingSymbol=(n=b.find(({type:m})=>m==="group"))===null||n===void 0?void 0:n.value,this.minusSign=(d=g.formatToParts(-1).find(({type:m})=>m==="minusSign"))===null||d===void 0?void 0:d.value,this.decimalSymbol===void 0?this.minimumFractionDigits=this.maximumFractionDigits=0:typeof a=="number"?this.minimumFractionDigits=this.maximumFractionDigits=a:(this.minimumFractionDigits=(o=a==null?void 0:a.min)!==null&&o!==void 0?o:g.resolvedOptions().minimumFractionDigits,this.maximumFractionDigits=(c=a==null?void 0:a.max)!==null&&c!==void 0?c:g.resolvedOptions().maximumFractionDigits);const D=m=>J(m,this.digits[1]),V=m=>m.substring(m.lastIndexOf(this.decimalSymbol?this.digits[0]:this.digits[1])+1);this.prefix=D(g.format(1)),this.suffix=V(g.format(1)),this.negativePrefix=D(g.format(-1)),this.negativeSuffix=V(g.format(-1))}parse(i){if(i){const t=this.isNegative(i);i=this.normalizeDigits(i),i=this.stripCurrency(i,t),i=this.stripSignLiterals(i);const e=this.decimalSymbol?`(?:${E(this.decimalSymbol)}(\\d*))?`:"",n=this.stripGroupingSeparator(i).match(new RegExp(`^${$}${e}$`));if(n&&this.isValidIntegerFormat(this.decimalSymbol?i.split(this.decimalSymbol)[0]:i,Number(n[1])))return+`${t?"-":""}${this.onlyDigits(n[1])}.${this.onlyDigits(n[2]||"")}`}return null}isValidIntegerFormat(i,t){const e={...this.options,minimumFractionDigits:0};return[this.stripCurrency(this.normalizeDigits(t.toLocaleString(this.locale,{...e,useGrouping:!0})),!1),this.stripCurrency(this.normalizeDigits(t.toLocaleString(this.locale,{...e,useGrouping:!1})),!1)].includes(i)}format(i,t={minimumFractionDigits:this.minimumFractionDigits,maximumFractionDigits:this.maximumFractionDigits}){return i!=null?i.toLocaleString(this.locale,{...this.options,...t}):""}toFraction(i){return`${this.digits[0]}${this.decimalSymbol}${this.onlyLocaleDigits(i.substring(1)).substring(0,this.maximumFractionDigits)}`}isFractionIncomplete(i){return!!this.normalizeDigits(this.stripGroupingSeparator(i)).match(new RegExp(`^${$}${E(this.decimalSymbol)}$`))}isNegative(i){return i.startsWith(this.negativePrefix)||this.minusSign===void 0&&(i.startsWith("(")||i.startsWith("-"))||this.minusSign!==void 0&&i.replace("-",this.minusSign).startsWith(this.minusSign)}insertCurrency(i,t){return`${t?this.negativePrefix:this.prefix}${i}${t?this.negativeSuffix:this.suffix}`}stripGroupingSeparator(i){return this.groupingSymbol!==void 0?i.replace(new RegExp(E(this.groupingSymbol),"g"),""):i}stripSignLiterals(i){return this.minusSign!==void 0?i.replace("-",this.minusSign).replace(this.minusSign,""):i.replace(/[-()]/g,"")}stripCurrency(i,t){return i.replace(t?this.negativePrefix:this.prefix,"").replace(t?this.negativeSuffix:this.suffix,"")}normalizeDecimalSeparator(i,t){return A.forEach(e=>{i=i.substring(0,t)+i.substring(t).replace(e,this.decimalSymbol)}),i}normalizeDigits(i){return this.digits[0]!=="0"&&this.digits.forEach((t,e)=>{i=i.replace(new RegExp(t,"g"),String(e))}),i}onlyDigits(i){return this.normalizeDigits(i).replace(/\D+/g,"")}onlyLocaleDigits(i){return i.replace(new RegExp(`[^${this.digits.join("")}]*`,"g"),"")}}class L{constructor(i){this.currencyFormat=i}}class Q extends L{conformToMask(i,t=""){const e=this.currencyFormat.isNegative(i),n=g=>g===""&&e&&!(this.currencyFormat.minusSign===void 0?t===this.currencyFormat.negativePrefix+this.currencyFormat.negativeSuffix:t===this.currencyFormat.negativePrefix),d=g=>{if(n(g))return"";if(this.currencyFormat.maximumFractionDigits>0){if(this.currencyFormat.isFractionIncomplete(g))return g;if(g.startsWith(this.currencyFormat.decimalSymbol))return this.currencyFormat.toFraction(g)}return null};let o=i;o=this.currencyFormat.stripCurrency(o,e),o=this.currencyFormat.stripSignLiterals(o);const c=d(o);if(c!=null)return this.currencyFormat.insertCurrency(c,e);const[u,...l]=o.split(this.currencyFormat.decimalSymbol),r=P(this.currencyFormat.onlyDigits(u)),a=this.currencyFormat.onlyDigits(l.join("")).substring(0,this.currencyFormat.maximumFractionDigits),h=l.length>0&&a.length===0,p=r===""&&e&&(this.currencyFormat.minusSign===void 0?t===i.slice(0,-2)+this.currencyFormat.negativeSuffix:t===i.slice(0,-1));return h||p||n(r)?t:r.match(/\d+/)?{numberValue:+`${e?"-":""}${r}.${a}`,fractionDigits:a}:""}}class Y extends L{conformToMask(i,t=""){if(i===""||this.currencyFormat.parse(t)===0&&this.currencyFormat.stripCurrency(t,!0).slice(0,-1)===this.currencyFormat.stripCurrency(i,!0))return"";const e=this.currencyFormat.isNegative(i),n=this.currencyFormat.stripSignLiterals(i)===""?-0:+`${e?"-":""}${P(this.currencyFormat.onlyDigits(i))}`/Math.pow(10,this.currencyFormat.maximumFractionDigits);return{numberValue:n,fractionDigits:n.toFixed(this.currencyFormat.maximumFractionDigits).slice(-this.currencyFormat.maximumFractionDigits)}}}const ii={locale:void 0,currency:void 0,currencyDisplay:void 0,hideGroupingSeparatorOnFocus:!0,hideCurrencySymbolOnFocus:!0,hideNegligibleDecimalDigitsOnFocus:!0,precision:void 0,autoDecimalDigits:!1,valueRange:void 0,useGrouping:void 0,valueScaling:void 0};class ti{constructor(i){this.el=i.el,this.onInput=i.onInput,this.onChange=i.onChange,this.addEventListener(),this.init(i.options)}setOptions(i){this.init(i),this.format(this.currencyFormat.format(this.validateValueRange(this.numberValue))),this.onChange(this.getValue())}getValue(){return{number:this.valueScaling&&this.numberValue!=null?this.toInteger(this.numberValue,this.valueScaling):this.numberValue,formatted:this.formattedValue}}setValue(i){const t=this.valueScaling!==void 0&&i!=null?this.toFloat(i,this.valueScaling):i;t!==this.numberValue&&(this.format(this.currencyFormat.format(this.validateValueRange(t))),this.onChange(this.getValue()))}init(i){this.options={...ii,...i},this.options.autoDecimalDigits&&(this.options.hideNegligibleDecimalDigitsOnFocus=!1),this.el.getAttribute("inputmode")||this.el.setAttribute("inputmode",this.options.autoDecimalDigits?"numeric":"decimal"),this.currencyFormat=new K(this.options),this.numberMask=this.options.autoDecimalDigits?new Y(this.currencyFormat):new Q(this.currencyFormat);const t={[y.precision]:this.currencyFormat.maximumFractionDigits,[y.thousands]:3,[y.tenThousands]:4,[y.millions]:6,[y.billions]:9};this.valueScaling=this.options.valueScaling?t[this.options.valueScaling]:void 0,this.valueScalingFractionDigits=this.valueScaling!==void 0&&this.options.valueScaling!==y.precision?this.valueScaling+this.currencyFormat.maximumFractionDigits:this.currencyFormat.maximumFractionDigits,this.minValue=this.getMinValue(),this.maxValue=this.getMaxValue()}getMinValue(){var i,t;let e=this.toFloat(-Number.MAX_SAFE_INTEGER);return((i=this.options.valueRange)===null||i===void 0?void 0:i.min)!==void 0&&(e=Math.max((t=this.options.valueRange)===null||t===void 0?void 0:t.min,this.toFloat(-Number.MAX_SAFE_INTEGER))),e}getMaxValue(){var i,t;let e=this.toFloat(Number.MAX_SAFE_INTEGER);return((i=this.options.valueRange)===null||i===void 0?void 0:i.max)!==void 0&&(e=Math.min((t=this.options.valueRange)===null||t===void 0?void 0:t.max,this.toFloat(Number.MAX_SAFE_INTEGER))),e}toFloat(i,t){return i/Math.pow(10,t??this.valueScalingFractionDigits)}toInteger(i,t){return Number(i.toFixed(t??this.valueScalingFractionDigits).split(".").join(""))}validateValueRange(i){return i!=null?Math.min(Math.max(i,this.minValue),this.maxValue):i}format(i,t=!1){if(i!=null){this.decimalSymbolInsertedAt!==void 0&&(i=this.currencyFormat.normalizeDecimalSeparator(i,this.decimalSymbolInsertedAt),this.decimalSymbolInsertedAt=void 0);const e=this.numberMask.conformToMask(i,this.formattedValue);let n;if(typeof e=="object"){const{numberValue:d,fractionDigits:o}=e;let{maximumFractionDigits:c,minimumFractionDigits:u}=this.currencyFormat;this.focus?u=t?o.replace(/0+$/,"").length:Math.min(c,o.length):Number.isInteger(d)&&!this.options.autoDecimalDigits&&(this.options.precision===void 0||u===0)&&(u=c=0),n=this.toInteger(Math.abs(d))>Number.MAX_SAFE_INTEGER?this.formattedValue:this.currencyFormat.format(d,{useGrouping:this.options.useGrouping!==!1&&!(this.focus&&this.options.hideGroupingSeparatorOnFocus),minimumFractionDigits:u,maximumFractionDigits:c})}else n=e;this.maxValue<=0&&!this.currencyFormat.isNegative(n)&&this.currencyFormat.parse(n)!==0&&(n=n.replace(this.currencyFormat.prefix,this.currencyFormat.negativePrefix)),this.minValue>=0&&(n=n.replace(this.currencyFormat.negativePrefix,this.currencyFormat.prefix)),(this.options.currencyDisplay===v.hidden||this.focus&&this.options.hideCurrencySymbolOnFocus)&&(n=n.replace(this.currencyFormat.negativePrefix,this.currencyFormat.minusSign!==void 0?this.currencyFormat.minusSign:"(").replace(this.currencyFormat.negativeSuffix,this.currencyFormat.minusSign!==void 0?"":")").replace(this.currencyFormat.prefix,"").replace(this.currencyFormat.suffix,"")),this.el.value=n,this.numberValue=this.currencyFormat.parse(n)}else this.el.value="",this.numberValue=null;this.formattedValue=this.el.value,this.onInput(this.getValue())}addEventListener(){this.el.addEventListener("input",i=>{const{value:t,selectionStart:e}=this.el,n=i;if(e&&n.data&&A.includes(n.data)&&(this.decimalSymbolInsertedAt=e-1),this.format(t),this.focus&&e!=null){const d=()=>{const{prefix:o,suffix:c,decimalSymbol:u,maximumFractionDigits:l,groupingSymbol:r}=this.currencyFormat;let a=t.length-e;const h=this.formattedValue.length;if(this.currencyFormat.minusSign===void 0&&(t.startsWith("(")||t.startsWith("-"))&&!t.endsWith(")"))return h-this.currencyFormat.negativeSuffix.length>1?this.formattedValue.substring(e).length:1;if(this.formattedValue.substring(e,1)===r&&M(this.formattedValue,r)===M(t,r)+1)return h-a-1;if(h<a)return e;if(u!==void 0&&t.indexOf(u)!==-1){const p=t.indexOf(u)+1;if(Math.abs(h-t.length)>1&&e<=p)return this.formattedValue.indexOf(u)+1;!this.options.autoDecimalDigits&&e>p&&this.currencyFormat.onlyDigits(t.substring(p)).length-1===l&&(a-=1)}return this.options.hideCurrencySymbolOnFocus||this.options.currencyDisplay===v.hidden?h-a:Math.max(h-Math.max(a,c.length),o.length)};this.setCaretPosition(d())}}),this.el.addEventListener("focus",()=>{this.focus=!0,this.numberValueOnFocus=this.numberValue,setTimeout(()=>{const{value:i,selectionStart:t,selectionEnd:e}=this.el;if(this.format(i,this.options.hideNegligibleDecimalDigitsOnFocus),t!=null&&e!=null&&Math.abs(t-e)>0)this.setCaretPosition(0,this.el.value.length);else if(t!=null){const n=this.getCaretPositionOnFocus(i,t);this.setCaretPosition(n)}})}),this.el.addEventListener("blur",()=>{this.focus=!1,this.format(this.currencyFormat.format(this.validateValueRange(this.numberValue))),this.numberValueOnFocus!==this.numberValue&&this.onChange(this.getValue())})}getCaretPositionOnFocus(i,t){if(this.numberValue==null)return t;const{prefix:e,negativePrefix:n,suffix:d,negativeSuffix:o,groupingSymbol:c,currency:u}=this.currencyFormat,l=this.numberValue<0,r=l?n:e,a=r.length;if(this.options.hideCurrencySymbolOnFocus||this.options.currencyDisplay===v.hidden){if(l){if(t<=1)return 1;if(i.endsWith(")")&&t>i.indexOf(")"))return this.formattedValue.length-1}}else{const p=l?o.length:d.length;if(t>=i.length-p)return this.formattedValue.length-p;if(t<a)return a}let h=t;return this.options.hideCurrencySymbolOnFocus&&this.options.currencyDisplay!==v.hidden&&t>=a&&u!==void 0&&r.includes(u)&&(h-=a,l&&(h+=1)),this.options.hideGroupingSeparatorOnFocus&&c!==void 0&&(h-=M(i.substring(0,t),c)),h}setCaretPosition(i,t=i){this.el.setSelectionRange(i,t)}}const ei=s=>s!=null&&s.matches("input")?s:s==null?void 0:s.querySelector("input");function ni(s,i){var t,e,n,d;let o;const c=_(null),u=_(null),l=_(null),r=k(),a=(r==null?void 0:r.emit)||((e=(t=r==null?void 0:r.proxy)===null||t===void 0?void 0:t.$emit)===null||e===void 0?void 0:e.bind(r==null?void 0:r.proxy)),h=(r==null?void 0:r.props)||((n=r==null?void 0:r.proxy)===null||n===void 0?void 0:n.$props),p=z.startsWith("3"),g=p&&((d=r==null?void 0:r.attrs.modelModifiers)===null||d===void 0?void 0:d.lazy),b=G(()=>h==null?void 0:h[p?"modelValue":"value"]),D=p?"update:modelValue":"input",V=g?"update:modelValue":"change";return T(c,m=>{var I;if(m){const O=ei((I=m==null?void 0:m.$el)!==null&&I!==void 0?I:m);O?(o=new ti({el:O,options:s,onInput:x=>{!g&&i!==!1&&b.value!==x.number&&(a==null||a(D,x.number)),l.value=x.number,u.value=x.formatted},onChange:x=>{a==null||a(V,x.number)}}),o.setValue(b.value)):console.error('No input element found. Please make sure that the "inputRef" template ref is properly assigned.')}else o=null}),{inputRef:c,numberValue:l,formattedValue:u,setValue:m=>o==null?void 0:o.setValue(m),setOptions:m=>o==null?void 0:o.setOptions(m)}}const si=["placeholder","type"],ri=w({__name:"CurrencyInput",props:{options:{},modelValue:{},placeholder:{},type:{}},setup(s,{expose:i}){const t=s,e={currency:"USD",currencyDisplay:v.hidden,autoDecimalDigits:!1,useGrouping:!1,hideCurrencySymbolOnFocus:!0,hideGroupingSeparatorOnFocus:!0,hideNegligibleDecimalDigitsOnFocus:!0,valueRange:{min:0,max:10**9},precision:{min:0,max:0},valueScaling:y.precision,accountingSign:!1},{inputRef:n,setOptions:d,setValue:o,formattedValue:c}=ni({...e,...t.options});return N(()=>{o(Number(t.modelValue))}),N(()=>{d({...e,...t.options})}),i({setValue:o}),(u,l)=>W((R(),j("input",{ref_key:"inputRef",ref:n,focus:"","onUpdate:modelValue":l[0]||(l[0]=r=>C(c)?c.value=r:null),placeholder:u.placeholder,type:u.type||"text"},null,8,si)),[[B,f(c)]])}}),oi={class:"text-sm text-gray-400 mt-2 px-3"},ai={class:"flex justify-between my-4 mx-3 border border-white/20 rounded-lg py-1 px-2"},mi=w({__name:"approveDialog",props:{show:{type:Boolean},address:{},amount:{},approve:{type:Function}},emits:["update:show"],setup(s,{emit:i}){const{t}=X(),e=s,n=_(null);N(()=>n.value=e.amount);const d=i,o=()=>{d("update:show",!1)},c=async()=>{try{o(),await e.approve(n.value||e.amount)}catch(u){console.error(t("授权失败")+":",u)}};return(u,l)=>{const r=ri,a=Z;return R(),U(a,{show:u.show,title:f(t)("授权"),"show-cancel-button":"",onCancel:l[2]||(l[2]=h=>o()),onConfirm:c},{default:q(()=>[S("div",oi,[S("p",null,F(f(t)("授权是允许智能合约代表您使用一定数量的代币"))+"。",1),S("p",null,F(f(t)("点击"))+'"Max"'+F(f(t)("授权最大额度"))+"，"+F(f(t)("未来交易将无需重复授权"))+"，"+F(f(t)("节省"))+"Gas"+F(f(t)("费用"))+"。",1),S("p",null,F(f(t)("您可以随时撤销或修改授权额度"))+"。",1)]),S("div",ai,[H(r,{modelValue:f(n),"onUpdate:modelValue":l[0]||(l[0]=h=>C(n)?n.value=h:null),class:"bg-transparent",placeholder:f(t)("请输入授权额度")},null,8,["modelValue","placeholder"]),S("button",{onClick:l[1]||(l[1]=h=>n.value=10**9),class:"h-[22px] text-xs bg-white text-black rounded px-2 py-1"},"Max")])]),_:1},8,["show","title"])}}});export{ri as _,mi as a};
