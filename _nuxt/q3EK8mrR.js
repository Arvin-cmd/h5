import{_ as M}from"./C1sHKuLU.js";import{u as S,s as T,a as O,b as V}from"./CB0RzM7m.js";import{y as D,z as E,L as K,M as Q,e as W,n as r,v as p,q as s,B as e,w as m,N as C,F as x,C as N,s as l,O as G,P as J,p as i}from"./BAumNzA0.js";import{t as U,s as X}from"./gYml6LKr.js";import{c as Y,a as Z}from"./CtEefc1e.js";import{u as ee}from"./giBQ5HTA.js";import{u as se}from"./CwyvtLZ2.js";import"./DlAUqK2U.js";import"./C-6VqVVC.js";const te={class:"h-screen flex flex-col"},oe={class:"flex-1 overflow-auto px-3 mt-4"},ne=["onClick"],ae={class:"relative"},le={class:"py-2 px-3 home-bg flex justify-between"},ie=["onClick"],re={class:"px-3 py-2 flex"},ce=["src"],de={class:"pl-3 text-sm text-white/80 flex-1"},ue={class:"flex items-center justify-between"},_e={class:"font-bold text-base"},pe={class:"flex items-center justify-between"},fe={class:"font-bold text-base"},he={class:"flex justify-end mt-1"},me={class:"px-4"},v=20,He=D({__name:"record",setup(xe){const{t:n}=E(),{betRecord:c,record:ve}=K(se()),F=ee(),{tokenAddressMap:B}=U(),H=Q(),{data:g,refetch:R,isRefetching:$,isFetching:I,hasNextPage:A,fetchNextPage:L}=S({queryKey:W(()=>["getAuctionsInfo",c.value.length]),refetchOnWindowFocus:!1,initialPageParam:1,getNextPageParam:t=>t.nextCursor,queryFn:async({pageParam:t=1})=>{const f=(t-1)*v,d=c.value.slice(f,t*v);if(!d.length)return{list:[],nextCursor:void 0};const u=await F.getAuctionsInfo(d.map(a=>BigInt(a))),_={list:u.map((a,h)=>({id:Number(c.value[f+h]),user:a.user,award:a.award,total:Number(a.total),pour:Number(a.pour)}))??[],nextCursor:void 0};return(t-1)*Number(v)+u.length<c.value.length&&(_.nextCursor=t+1),_}});return(t,f)=>{const d=M,u=O,_=J,y=X,a=V,h=T;return i(),r("div",te,[p(d,{title:e(n)("下注记录")},null,8,["title"]),s("div",oe,[p(h,{"model-value":e($),onRefresh:e(R)},{default:m(()=>{var b,w;return[((w=(b=e(g))==null?void 0:b.pages[0])==null?void 0:w.list.length)===0?(i(),C(u,{key:0,image:"/empty.png",description:e(n)("暂无竞拍")},null,8,["description"])):(i(),C(a,{key:1,loading:e(I),finished:!e(A),"loading-text":e(n)("加载中")+"...","finished-text":e(n)("没有更多了"),onLoad:e(L)},{default:m(()=>{var k;return[(i(!0),r(x,null,N((k=e(g))==null?void 0:k.pages,(j,P)=>(i(),r(x,{key:P},[(i(!0),r(x,null,N(j.list,(o,q)=>(i(),r("div",{key:q,class:"mb-3 bg-[#2A2B30] rounded-lg border-bg",onClick:z=>e(H).push(`/auction/info?id=${o.id}`)},[s("div",ae,[s("div",le,[s("span",null,"# "+l(o.id),1),s("span",{onClick:G(z=>("copyHandle"in t?t.copyHandle:e(Y))(o==null?void 0:o.award),["stop"])},[s("span",null,l(e(n)("奖品"))+": "+l(("addressFl"in t?t.addressFl:e(Z))(o==null?void 0:o.award)),1),p(_,{"class-prefix":"iconfont icon-copy text-white/60 ml-1"})],8,ie)]),s("div",re,[s("div",null,[s("img",{class:"w-20 h-20",src:e(B)[o.award].icon,alt:""},null,8,ce)]),s("div",de,[s("div",ue,[s("span",null,l(e(n)("总筹码")),1),s("span",_e,l(o.total),1)]),s("div",pe,[s("span",null,l(e(n)("已下注")),1),s("span",fe,l(o.pour),1)]),s("div",he,[p(y,{color:"#77dee8",plain:"",size:"mini",round:""},{default:m(()=>[s("span",me,l(e(n)("详情")),1)]),_:1})])])])])],8,ne))),128))],64))),128))]}),_:1},8,["loading","finished","loading-text","finished-text","onLoad"]))]}),_:1},8,["model-value","onRefresh"])])])}}});export{He as default};
