var X=t=>{throw TypeError(t)};var j=(t,e,n)=>e.has(t)||X("Cannot "+n);var c=(t,e,n)=>(j(t,e,"read from private field"),n?n.call(t):e.get(t)),I=(t,e,n)=>e.has(t)?X("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),T=(t,e,n,o)=>(j(t,e,"write to private field"),o?o.call(t,n):e.set(t,n),n),E=(t,e,n)=>(j(t,e,"access private method"),n);import{e as $,i as M,g as L,s as Q,a0 as gt,b as d,K as q,an as bt,f as P,b1 as Ct,I as yt,V as vt,j as A,$ as ot,ac as Bt,x as O,ab as st,b2 as wt,v as Y,b3 as pt,m as at,p as St,O as xt,P as Ot,h as Pt,ai as kt,b4 as Z,b5 as It,b6 as Tt,b7 as Et,b8 as Rt,l as At,al as Dt,aE as Kt,aH as Mt,b9 as G,ba as _t,aR as $t,at as Lt,au as qt,bb as Nt,aV as Ut,aW as zt,aX as Ft,R as J,aY as it,a_ as Ht,a$ as rt,b0 as jt,aZ as Vt,bc as Wt,bd as Qt,be as Yt,af as lt,q as Xt,bf as Zt,u as Gt}from"./CTDKT58D.js";import{s as Jt}from"./CSF6aMVe.js";import{u as te,L as ee,t as ne,c as oe}from"./Ca0hXmEk.js";const[ct,tt]=L("action-bar"),ut=Symbol(ct),se={placeholder:Boolean,safeAreaInsetBottom:M};var ae=$({name:ct,props:se,setup(t,{slots:e}){const n=Q(),o=te(n,tt),{linkChildren:s}=gt(ut);s();const a=()=>{var f;return d("div",{ref:n,class:[tt(),{"van-safe-area-bottom":t.safeAreaInsetBottom}]},[(f=e.default)==null?void 0:f.call(e)])};return()=>t.placeholder?o(a):a()}});const ie=q(ae),dt={to:[String,Object],url:String,replace:Boolean};function re({to:t,url:e,replace:n,$router:o}){t&&o?o[n?"replace":"push"](t):e&&(n?location.replace(e):location.href=e)}function ft(){const t=bt().proxy;return()=>re(t)}const[le,R]=L("button"),ce=P({},dt,{tag:A("button"),text:String,icon:String,type:A("default"),size:A("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:A("button"),loadingSize:ot,loadingText:String,loadingType:String,iconPosition:A("left")});var ue=$({name:le,props:ce,emits:["click"],setup(t,{emit:e,slots:n}){const o=ft(),s=()=>n.loading?n.loading():d(ee,{size:t.loadingSize,type:t.loadingType,class:R("loading")},null),a=()=>{if(t.loading)return s();if(n.icon)return d("div",{class:R("icon")},[n.icon()]);if(t.icon)return d(yt,{name:t.icon,class:R("icon"),classPrefix:t.iconPrefix},null)},f=()=>{let i;if(t.loading?i=t.loadingText:i=n.default?n.default():t.text,i)return d("span",{class:R("text")},[i])},u=()=>{const{color:i,plain:l}=t;if(i){const h={color:l?i:"white"};return l||(h.background=i),i.includes("gradient")?h.border=0:h.borderColor=i,h}},g=i=>{t.loading?vt(i):t.disabled||(e("click",i),o())};return()=>{const{tag:i,type:l,size:h,block:v,round:N,plain:U,square:z,loading:F,disabled:r,hairline:m,nativeType:B,iconPosition:C}=t,k=[R([l,h,{plain:U,block:v,round:N,square:z,loading:F,disabled:r,hairline:m}]),{[Ct]:m}];return d(i,{type:B,class:k,style:u(),disabled:r,onClick:g},{default:()=>[d("div",{class:R("content")},[C==="left"&&a(),f(),C==="right"&&a()])]})}}});const V=q(ue),[de,fe]=L("action-bar-button"),he=P({},dt,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var me=$({name:de,props:he,setup(t,{slots:e}){const n=ft(),{parent:o,index:s}=Bt(ut),a=O(()=>{if(o){const u=o.children[s.value-1];return!(u&&"isButton"in u)}}),f=O(()=>{if(o){const u=o.children[s.value+1];return!(u&&"isButton"in u)}});return st({isButton:!0}),()=>{const{type:u,icon:g,text:i,color:l,loading:h,disabled:v}=t;return d(V,{class:fe([u,{last:f.value,first:a.value}]),size:"large",type:u,icon:g,color:l,loading:h,disabled:v,onClick:n},{default:()=>[e.default?e.default():i]})}}});const et=q(me);function ge(){const t=Y({show:!1}),e=s=>{t.show=s},n=s=>{P(t,s,{transitionAppear:!0}),e(!0)},o=()=>e(!1);return st({open:n,close:o,toggle:e}),{open:n,close:o,state:t,toggle:e}}function be(t){const e=wt(t),n=document.createElement("div");return document.body.appendChild(n),{instance:e.mount(n),unmount(){e.unmount(),document.body.removeChild(n)}}}const[Ce,y,K]=L("dialog"),ye=P({},Pt,{title:String,theme:String,width:ot,message:[String,Function],callback:Function,allowHtml:Boolean,className:kt,transition:A("van-dialog-bounce"),messageAlign:String,closeOnPopstate:M,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:M,closeOnClickOverlay:Boolean,keyboardEnabled:M,destroyOnClose:Boolean}),ve=[...At,"transition","closeOnPopstate","destroyOnClose"];var ht=$({name:Ce,props:ye,emits:["confirm","cancel","keydown","update:show"],setup(t,{emit:e,slots:n}){const o=Q(),s=Y({confirm:!1,cancel:!1}),a=r=>e("update:show",r),f=r=>{var m;a(!1),(m=t.callback)==null||m.call(t,r)},u=r=>()=>{t.show&&(e(r),t.beforeClose?(s[r]=!0,Rt(t.beforeClose,{args:[r],done(){f(r),s[r]=!1},canceled(){s[r]=!1}})):f(r))},g=u("cancel"),i=u("confirm"),l=pt(r=>{var m,B;if(!t.keyboardEnabled||r.target!==((B=(m=o.value)==null?void 0:m.popupRef)==null?void 0:B.value))return;({Enter:t.showConfirmButton?i:Z,Escape:t.showCancelButton?g:Z})[r.key](),e("keydown",r)},["enter","esc"]),h=()=>{const r=n.title?n.title():t.title;if(r)return d("div",{class:y("header",{isolated:!t.message&&!n.default})},[r])},v=r=>{const{message:m,allowHtml:B,messageAlign:C}=t,k=y("message",{"has-title":r,[C]:C}),H=It(m)?m():m;return B&&typeof H=="string"?d("div",{class:k,innerHTML:H},null):d("div",{class:k},[H])},N=()=>{if(n.default)return d("div",{class:y("content")},[n.default()]);const{title:r,message:m,allowHtml:B}=t;if(m){const C=!!(r||n.title);return d("div",{key:B?1:0,class:y("content",{isolated:!C})},[v(C)])}},U=()=>d("div",{class:[Et,y("footer")]},[t.showCancelButton&&d(V,{size:"large",text:t.cancelButtonText||K("cancel"),class:y("cancel"),style:{color:t.cancelButtonColor},loading:s.cancel,disabled:t.cancelButtonDisabled,onClick:g},null),t.showConfirmButton&&d(V,{size:"large",text:t.confirmButtonText||K("confirm"),class:[y("confirm"),{[Tt]:t.showCancelButton}],style:{color:t.confirmButtonColor},loading:s.confirm,disabled:t.confirmButtonDisabled,onClick:i},null)]),z=()=>d(ie,{class:y("footer")},{default:()=>[t.showCancelButton&&d(et,{type:"warning",text:t.cancelButtonText||K("cancel"),class:y("cancel"),color:t.cancelButtonColor,loading:s.cancel,disabled:t.cancelButtonDisabled,onClick:g},null),t.showConfirmButton&&d(et,{type:"danger",text:t.confirmButtonText||K("confirm"),class:y("confirm"),color:t.confirmButtonColor,loading:s.confirm,disabled:t.confirmButtonDisabled,onClick:i},null)]}),F=()=>n.footer?n.footer():t.theme==="round-button"?z():U();return()=>{const{width:r,title:m,theme:B,message:C,className:k}=t;return d(Ot,at({ref:o,role:"dialog",class:[y([B]),k],style:{width:xt(r)},tabindex:0,"aria-labelledby":m||C,onKeydown:l,"onUpdate:show":a},St(t,ve)),{default:()=>[h(),N(),F()]})}}});let D;const Be={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1,destroyOnClose:!1};let we=P({},Be);function pe(){({instance:D}=be({setup(){const{state:e,toggle:n}=ge();return()=>d(ht,at(e,{"onUpdate:show":n}),null)}}))}function Se(t){return Dt?new Promise((e,n)=>{D||pe(),D.open(P({},we,t,{callback:o=>{(o==="confirm"?e:n)(o)}}))}):Promise.resolve(void 0)}const xe=t=>Se(P({showCancelButton:!0},t)),Me=()=>{D&&D.toggle(!1)};q(ht);var w,x,b,p,S,_,W,nt,Oe=(nt=class extends Kt{constructor(e,n){super();I(this,S);I(this,w);I(this,x);I(this,b);I(this,p);T(this,w,e),this.setOptions(n),this.bindMethods(),E(this,S,_).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var o;const n=this.options;this.options=c(this,w).defaultMutationOptions(e),Mt(this.options,n)||c(this,w).getMutationCache().notify({type:"observerOptionsUpdated",mutation:c(this,b),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&G(n.mutationKey)!==G(this.options.mutationKey)?this.reset():((o=c(this,b))==null?void 0:o.state.status)==="pending"&&c(this,b).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(e=c(this,b))==null||e.removeObserver(this)}onMutationUpdate(e){E(this,S,_).call(this),E(this,S,W).call(this,e)}getCurrentResult(){return c(this,x)}reset(){var e;(e=c(this,b))==null||e.removeObserver(this),T(this,b,void 0),E(this,S,_).call(this),E(this,S,W).call(this)}mutate(e,n){var o;return T(this,p,n),(o=c(this,b))==null||o.removeObserver(this),T(this,b,c(this,w).getMutationCache().build(c(this,w),this.options)),c(this,b).addObserver(this),c(this,b).execute(e)}},w=new WeakMap,x=new WeakMap,b=new WeakMap,p=new WeakMap,S=new WeakSet,_=function(){var n;const e=((n=c(this,b))==null?void 0:n.state)??_t();T(this,x,{...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset})},W=function(e){$t.batch(()=>{var n,o,s,a,f,u,g,i;if(c(this,p)&&this.hasListeners()){const l=c(this,x).variables,h=c(this,x).context,v={client:c(this,w),meta:this.options.meta,mutationKey:this.options.mutationKey};(e==null?void 0:e.type)==="success"?((o=(n=c(this,p)).onSuccess)==null||o.call(n,e.data,l,h,v),(a=(s=c(this,p)).onSettled)==null||a.call(s,e.data,null,l,h,v)):(e==null?void 0:e.type)==="error"&&((u=(f=c(this,p)).onError)==null||u.call(f,e.error,l,h,v),(i=(g=c(this,p)).onSettled)==null||i.call(g,void 0,e.error,l,h,v))}this.listeners.forEach(l=>{l(c(this,x))})})},nt);function Pe(t=""){if(!Lt())throw new Error("vue-query hooks can only be used inside setup() function or functions that support injection context.");const e=Nt(t),n=qt(e);if(!n)throw new Error("No 'queryClient' found in Vue context, use 'VueQueryPlugin' to properly initialize the library.");return n}function ke(t,e){const n=Pe(),o=O(()=>n.defaultMutationOptions(Ut(t))),s=new Oe(n,o.value),a=o.value.shallow?zt(s.getCurrentResult()):Y(s.getCurrentResult()),f=s.subscribe(l=>{Ft(a,l)}),u=(l,h)=>{s.mutate(l,h).catch(()=>{})};J(o,()=>{s.setOptions(o.value)}),it(()=>{f()});const g=o.value.shallow?Ht(a):rt(a),i=jt(g);return J(()=>a.error,l=>{if(l&&Vt(o.value.throwOnError,[l]))throw l}),{...i,mutate:u,mutateAsync:a.mutate,reset:a.reset}}function Ie(t){return t.state.chainId}async function _e(t,e){const{abi:n,chainId:o,connector:s,...a}=e;let f;e.account?f=e.account:f=(await Wt(t,{assertChainId:!1,chainId:o,connector:s})).account;const u=t.getClient({chainId:o}),g=Qt(u,Jt,"simulateContract"),{result:i,request:l}=await g({...a,abi:n,account:f});return{chainId:u.chain.id,result:i,request:{...l,chainId:o}}}function Te(t,e){const{onChange:n}=e;return t.subscribe(o=>o.chainId,n)}function Ee(t){return{mutationFn(e){return Yt(t,e)},mutationKey:["writeContract"]}}function mt(t={}){const e=lt(t),n=Q(Ie(e)),o=Te(e,{onChange(s){n.value=s}});return it(()=>o()),rt(n)}function $e(t={}){const{mutation:e}=t,n=lt(t),o=Ee(n),{mutate:s,mutateAsync:a,...f}=ke({...e,...o});return{...f,writeContract:s,writeContractAsync:a}}const Le=t=>{const e=mt();return O(()=>oe[t][e.value])},qe=()=>{const t=mt(),e=O(()=>ne.filter(s=>s.chainId===t.value)),n=O(()=>e.value.reduce((s,a)=>(s[a==null?void 0:a.symbol]=a,s),{})),o=O(()=>e.value.reduce((s,a)=>(s[a.address]=a,s),{}));return{tokenList:e,tokenMap:n,tokenAddressMap:o}},Ne=()=>{const{address:t}=Xt(),{open:e}=Zt(),{t:n}=Gt();return{connect:async()=>{if(!t.value)throw xe({title:n("温馨提醒"),message:n("检测到您未连接钱包")+"，"+n("请先连接钱包"),confirmButtonText:n("连接钱包")}).then(()=>{e()}),new Error(n("请先连接钱包"))}}};export{ue as a,$e as b,Me as c,Ne as d,_e as e,ge as f,Le as g,ht as h,Pe as i,be as m,xe as s,qe as t,ke as u};
