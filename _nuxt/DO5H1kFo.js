import{_ as P}from"./DI5iFUz9.js";import{u as q,s as M,a as K,b as T}from"./y_3C-5SX.js";import{x as V,y as D,J as E,e as J,n as r,s as p,p as s,z as e,w as h,K as w,F as m,A as k,q as i,L as O,M as Q,o as l}from"./CjEckXE1.js";import{t as W,s as G}from"./B7DfnqAM.js";import{c as U,a as X}from"./BfxcOA64.js";import{u as Y}from"./D3NBHuF2.js";import{u as Z}from"./C-urfVly.js";import"./DlAUqK2U.js";import"./DL_Tt6xh.js";const ee={class:"h-screen flex flex-col"},se={class:"flex-1 overflow-auto px-3 mt-4"},te=["onClick"],oe={class:"relative"},ne={class:"py-2 px-3 home-bg flex justify-between"},ae=["onClick"],ie={class:"px-3 py-2 flex"},le=["src"],ce={class:"pl-3 text-sm text-white/80 flex-1"},re={class:"flex items-center justify-between"},de={class:"font-bold text-base"},ue={class:"flex items-center justify-between"},_e={class:"font-bold text-base"},pe={class:"flex justify-end mt-1"},fe={class:"px-4"},Fe=V({__name:"record",setup(he){const{t:n}=D(),{betRecord:x}=Z(),N=Y(),{tokenAddressMap:C}=W(),F=E(),{data:g,isPending:me,refetch:H,isRefetching:$,isFetching:z,hasNextPage:A,fetchNextPage:B}=q({queryKey:J(()=>["getAuctionsInfo"]),refetchOnWindowFocus:!1,initialPageParam:1,getNextPageParam:t=>t.nextCursor,queryFn:async({pageParam:t=1})=>{const d=(t-1)*20,f=x.slice(d,t*20),c=await N.getAuctionsInfo(f.map(a=>BigInt(a))),u={list:c.map((a,_)=>({id:Number(x[d+_]),user:a.user,award:a.award,total:Number(a.total),pour:Number(a.pour)}))??[],nextCursor:void 0};return(t-1)*20+c.length<Number(c[0])&&(u.nextCursor=t+1),u}});return(t,I)=>{const d=P,f=K,c=Q,u=G,v=T,a=M;return l(),r("div",ee,[p(d,{title:e(n)("下注记录")},null,8,["title"]),s("div",se,[p(a,{"model-value":e($),onRefresh:e(H)},{default:h(()=>{var _,y;return[((y=(_=e(g))==null?void 0:_.pages[0])==null?void 0:y.list.length)===0?(l(),w(f,{key:0,image:"/empty.png",description:e(n)("暂无竞拍")},null,8,["description"])):(l(),w(v,{key:1,loading:e(z),finished:!e(A),"loading-text":e(n)("加载中")+"...","finished-text":e(n)("没有更多了"),onLoad:e(B)},{default:h(()=>{var b;return[(l(!0),r(m,null,k((b=e(g))==null?void 0:b.pages,(R,S)=>(l(),r(m,{key:S},[(l(!0),r(m,null,k(R.list,(o,L)=>(l(),r("div",{key:L,class:"mb-3 bg-[#2A2B30] rounded-lg border-bg",onClick:j=>e(F).push(`/auction/info?id=${o.id}`)},[s("div",oe,[s("div",ne,[s("span",null,"# "+i(o.id),1),s("span",{onClick:O(j=>("copyHandle"in t?t.copyHandle:e(U))(o==null?void 0:o.award),["stop"])},[s("span",null,i(e(n)("奖品"))+": "+i(("addressFl"in t?t.addressFl:e(X))(o==null?void 0:o.award)),1),p(c,{"class-prefix":"iconfont icon-copy text-white/60 ml-1"})],8,ae)]),s("div",ie,[s("div",null,[s("img",{class:"w-20 h-20",src:e(C)[o.award].icon,alt:""},null,8,le)]),s("div",ce,[s("div",re,[s("span",null,i(e(n)("总筹码")),1),s("span",de,i(o.total),1)]),s("div",ue,[s("span",null,i(e(n)("已下注")),1),s("span",_e,i(o.pour),1)]),s("div",pe,[p(u,{color:"#77dee8",plain:"",size:"mini",round:""},{default:h(()=>[s("span",fe,i(e(n)("详情")),1)]),_:1})])])])])],8,te))),128))],64))),128))]}),_:1},8,["loading","finished","loading-text","finished-text","onLoad"]))]}),_:1},8,["model-value","onRefresh"])])])}}});export{Fe as default};
