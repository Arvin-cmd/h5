import{a as ae,u as se,_ as oe,s as ie}from"./oLmhSPqQ.js";import{_ as le,a as re}from"./BVk2C0Ud.js";import{c as b,r as w,C as _,D as ue,v as de,x as pe,ay as ce,m as h,q as C,n as a,y as e,p as l,J as H,ax as K,I as Q,o as y}from"./RL1ig8FZ.js";import{p as z,f as G,c as O,a as W,b as U,s as A,d as ye}from"./DhXQRDnN.js";import{g as me,u as fe,a as ve,b as P}from"./D8S4GKic.js";import{u as q}from"./FKcu2zTh.js";import{a as be}from"./eWe1y3MY.js";import{_ as we}from"./DlAUqK2U.js";import"./DBGHBmPk.js";const Fe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAUGSURBVHgB7Z1dahNRFMdP2pLQYrFQSbFYKFQUfK3vugBdgC6gvqvv1nc3YBfgBuoCugD75JOlhUKhpcVAJZLQYInnn5ybTiYzyXzcczMzmR9cQj5Gzc9z536fVGiKdLvdeX5Y5lLlsiSPVXm75vv4LZcbeexIaXJpVSqVW5oSFXKIRxjKfRqVlJQWlzaXay5Nl0KdCGRxEPaQ+lE2T/o0uFyzyGtSRk2gRFudyxq5kRYEqvk59WWqRKV1gRkR5wcif7PEC7KMVYEsb4UfNuiuIcgavYhkkQ2yhBWBLA7CNqnfOOQBCITIDqUktUCWh+q6TtmprlGxEo2JBcq9Di3rGuWbK5Z4RglJJFCq7GMui1QM0I88SVKlYwsUeU8puw1FUiDvV1yJsQQWWJ4htsTIAmdAniGWxEgCZ0ieIbLEOYoGGoxZkQfwXbekpzGWiQL5D3lExWlt44CJj/VJHxorkOWtUv77eWmoy0AhlFCBct/boJJ1cRHIuAiEvLwNzzSAg82wNwMFStVdoRLDssw0jRAWgRNvnhbAOPorlx9cvsnzONfsc9khd2wEtcoj/UD+EP6RLgRCgFcaFojecTmKcQ3AJOmOPGpzwX3Dc+8LQxEohh+QPts0KgJziW9jXkPy2h5Fi+C01P1R6K/CqOd57DC7kgh5Q906v0AXVVcLVxKH+oUDgdLK5H24BnlokJ6QHvOyTNvDG4FF6bbgy6Glfkl6DKK8J1BujKtUHCDxC5fXpMOSaUzmPH9hEflEOhIhD5MNA4FFHnVA4jbZp+fMCMzzdBU60HsTPqMxYukLlLq8RPkGAj+PeV8jAqtwhwjMuzwDhnkYCjYD3jsiHZYhsEgNyCH1h4PecTGE7pIOtQUq3lqHmVx4zuUel+8UHJU2WCyiQACJ+6RPFVW4nHVOTg0Cbe1TnknKCExHNerCekkIpcCUlAJTAoE3VJKU2zIC09GBwNQ71WeYfxiJaAnEGPsN9dcn/lJ/mt3F2q1LOhDYJh0+cHnleY4pJVcL4K7oaDYiL3zPXS6Au6IJgVozFUEYiXlef/bSmpNTjBpRGDaJCYnvKf+04c50Y/6QfXYp/H5XhElcHM4ZjEQ0Dia73DU1DXrOjEDY1DiQXGSJvbajJ1Dugy3SoYgSG+YEvHcop/kFiyZxcMsbCGSjCEnNbBdFkdjxJrPwTyZckS5pJLrsr44jfIsvc0m6UQiMxMOA9w4mXBeES7GYNxjqsSx4n+DG2O12EYXawy3IwC4C7JzCGBkSDihYqqEp7/u3aWjtOgii4U+fErRLH4tMzyib68X4j4V4TFJAKOR9JDdRiHvfT/+LgcddZbvvFpV4OQ1KUBE4Iy2tTFZu2lmgEZbdY9yU/inpNyh5wKSPCiRUoJzWDr1whhiboGfsohJfiBZZu2+YZa4mJeaJsiqHKNQaJ2eZdpSEPBMFSr/nhGZr9Q7f9TjKB8u0J6PYT3tiKBPvjFKmfrpDP/WTQSRipFKUHf5YGz92knzMC4tEYoo65Rt0086T5li1kYARhxTzmOEDwnCE/5JSYDMFKCTm5cwdxvmnmUgB6kWiEbsOspyE9sxmfmmVPNIsEhIhMysiUV1xr7u0nU9aOxE3qvQ0I1JNnMFVKniIRHFxKt6scV/ISqMq0/oxAsjEGWVb/UhsjsL+HtzbnP66g1OBfjxnlc1PYqDgtRqNdovMDjLzUxgteXT66w1+/gMdcIWlfys5jgAAAABJRU5ErkJggg==",xe=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessControlBadConfirmation",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"bytes32",name:"neededRole",type:"bytes32"}],name:"AccessControlUnauthorizedAccount",type:"error"},{inputs:[],name:"InvalidInitialization",type:"error"},{inputs:[],name:"NotInitializing",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint64",name:"version",type:"uint64"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Swap",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"adminWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_usdt",type:"address"},{internalType:"address",name:"_ubToken",type:"address"},{internalType:"uint256",name:"_swapFee",type:"uint256"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"callerConfirmation",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_swapFee",type:"uint256"}],name:"setSwapFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_token",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"swap",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"swapFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"ubToken",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"usdt",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"}],he=()=>{const F=ae(),t=me("EXCHANGE"),{writeContractAsync:x}=fe({}),{connect:u}=ve(),n=b(()=>({address:t.value,abi:xe})),r=w(0n);async function m(){return r.value=await ue(F,{...n.value,functionName:"swapFee"}),r.value}async function o(d){await u();const p=await x({...n.value,functionName:"setSwapFee",args:[d]});await _(F,{hash:p})}async function g(d,p){const v=await x({...n.value,functionName:"swap",args:[d,p]});await _(F,{hash:v})}async function f(d){await u();const p=await x({...n.value,functionName:"adminWithdraw",args:[d]});await _(F,{hash:p})}return{address:t,fee:r,swapFee:m,setSwapFee:o,swap:g,adminWithdraw:f}},Ae={class:"flex flex-col h-screen"},ge={class:"mx-4 mt-10 border border-[#FFFFFF33] p-5 rounded-xl bg-white/10 backdrop-blur-sm border-bg"},ke={class:"relative"},Te={class:"mb-4"},_e={class:"text-[#D1D1D1] text-xs mb-2"},Ce={class:"bg-[#FFFFFF1A] rounded-lg p-3"},Ue={class:"flex justify-between items-center mb-2"},Ie={class:"flex items-center"},Re=["src"],De={class:"text-white font-medium text-xs"},Ee={class:"text-right"},Me={class:"text-[#FFFFFF80] text-xs"},Je={class:"flex justify-between items-center"},Ne={class:"mb-4"},Be={class:"text-[#D1D1D1] text-xs mb-2"},Se={class:"bg-[#FFFFFF1A] rounded-lg p-3"},Ye={class:"flex justify-between items-center mb-2"},je={class:"flex items-center"},Ve=["src"],He={class:"text-white font-medium text-xs"},Ke={class:"text-right"},Qe={class:"text-[#FFFFFF80] text-xs"},ze={class:"flex justify-between items-center"},Ge=["value"],Oe={class:"flex justify-center mt-4"},We=["disabled"],Pe={key:1},qe=["disabled"],Le={key:1},Xe={class:"text-center mt-3 text-[#FFFFFF80] text-xs"},Ze=de({__name:"index",setup(F){const{t}=pe();be({title:"UU"+t("竞拍")+" - "+t("快捷代币兑换与提现"),ogTitle:"UU"+t("竞拍")+" | "+t("无缝代币兑换系统"),description:"UU"+t("竞拍平台提供流畅的代币兑换与提现服务")+"，"+t("轻松将")+"USDT"+t("兑换为")+"UB"+t("筹码")+"，"+t("或将获得的奖励兑换回其他代币")+"。",ogDescription:t("需要筹码参与竞拍")+"？"+t("想要提现您的奖励")+"？UU"+t("竞拍平台提供便捷的代币兑换系统")+"，"+t("支持")+"USDT"+t("与")+"UB"+t("筹码的即时兑换")+"，"+t("零延迟")+"，"+t("低手续费")+"。"+t("一键")+"Max"+t("功能让您轻松管理资产")+"，"+t("立即体验区块链资产的灵活流动性")+"！"});const{address:x}=se(),u=he(),n=w(q("USDT")),r=w(q("UB")),m=w(!1),o=w(null),g=b(()=>n.value.tokenInfo.symbol==="UB"?String(Number(o.value)*(100-Number(f.value))/100):o.value),f=w(0n),d=b(()=>n.value.tokenInfo.symbol==="UB"?(100-Number(f.value))/100:1),p=async()=>{f.value===0n&&(f.value=await u.swapFee()),n.value.allowanceMap[u.address.value]||await n.value.allowance(u.address.value)},v=b(()=>!o.value||!n.value?0n:z(o.value,n.value.tokenInfo.decimals)),k=b(()=>({from:G(n.value.balance,n.value.tokenInfo.decimals),to:G(r.value.balance,r.value.tokenInfo.decimals)})),L=b(()=>n.value.allowanceMap[u.address.value]||0n>=v.value),X=()=>{n.value&&(o.value=k.value.from)},Z=async()=>{const s=n.value;n.value=r.value,r.value=s,n.value.tokenInfo.symbol==="UB"&&p()},{isPending:I,mutateAsync:$}=P({mutationFn:async s=>{if(!s){A("请输入有效金额");return}await n.value.approve(u.address.value,z(s,n.value.tokenInfo.decimals)),await n.value.allowance(u.address.value)}}),{isPending:R,mutate:ee}=P({mutationFn:async()=>{if(!n.value||!r.value||!v.value){A(t(t("请输入有效金额")));return}if(n.value.balance<v.value){A(t("余额不足"));return}if(v.value>(n.value.allowanceMap[u.address.value]||0n)){A(t("授权额度不足"));return}const s=BigInt(o.value||0);if(s<10n){A(t("最小交易金额")+"10");return}const i=ye({message:t("兑换中")+"...",duration:0});try{await u.swap(n.value.tokenInfo.address,s),i.open({type:"success",message:t("兑换成功"),duration:2e3}),n.value.balanceOf(),r.value.balanceOf(),n.value.allowance(u.address.value),o.value=null}catch(T){i.open({type:"error",message:T.shortMessage||t("兑换失败"),duration:2e3})}}});return ce(x,s=>{s&&(n.value.balanceOf(),n.value.allowance(u.address.value),r.value.balanceOf())},{immediate:!0}),(s,i)=>{var E,M,J,N,B,S,Y,j,V;const T=oe,te=le,D=ie,ne=re;return y(),h("div",Ae,[C(T,{title:e(t)("兑换")},null,8,["title"]),a("div",ge,[a("div",ke,[a("div",Te,[a("div",_e,l(e(t)("兑换数量")),1),a("div",Ce,[a("div",Ue,[a("div",Ie,[a("img",{src:(E=e(n))==null?void 0:E.tokenInfo.icon,alt:"Token",class:"w-8 h-8 mr-2"},null,8,Re),a("div",null,[a("div",null,[a("div",De,l((M=e(n))==null?void 0:M.tokenInfo.symbol),1)]),a("div",{class:"text-[#FFFFFF80] text-xs underline",onClick:i[0]||(i[0]=H(c=>("copyHandle"in s?s.copyHandle:e(O))(e(n).tokenInfo.address),["stop"]))},l(("addressFl"in s?s.addressFl:e(W))((J=e(n))==null?void 0:J.tokenInfo.address)),1)])]),a("div",Ee,[a("div",Me,l(e(t)("余额"))+": "+l(("formatNumber"in s?s.formatNumber:e(U))(e(k).from)),1)])]),a("div",Je,[C(te,{modelValue:e(o),"onUpdate:modelValue":i[1]||(i[1]=c=>K(o)?o.value=c:null),class:"bg-transparent text-white text-xl w-3/4 outline-none",placeholder:"0.0"},null,8,["modelValue"]),a("button",{onClick:X,class:"bg-transparent shadow-none h-[22px] text-xs border border-[#D1D1D1] rounded px-2 py-1"},"Max")])])]),a("div",{class:"flex justify-center my-2"},[a("button",{class:"bg-[#FFFFFF1A] rounded-full p-1",onClick:Z},i[6]||(i[6]=[a("img",{class:"w-10 h-10",src:Fe,alt:""},null,-1)]))]),a("div",Ne,[a("div",Be,l(e(t)("获得数量")),1),a("div",Se,[a("div",Ye,[a("div",je,[a("img",{src:e(r).tokenInfo.icon,alt:"Token",class:"w-8 h-8 mr-2"},null,8,Ve),a("div",null,[a("div",He,l((N=e(r))==null?void 0:N.tokenInfo.symbol),1),a("div",{class:"text-[#FFFFFF80] text-xs underline",onClick:i[2]||(i[2]=H(c=>("copyHandle"in s?s.copyHandle:e(O))(e(r).tokenInfo.address),["stop"]))},l(("addressFl"in s?s.addressFl:e(W))((B=e(r))==null?void 0:B.tokenInfo.address)),1)])]),a("div",Ke,[a("div",Qe,l(e(t)("余额"))+": "+l(("formatNumber"in s?s.formatNumber:e(U))(e(k).to)),1)])]),a("div",ze,[a("input",{value:("formatNumber"in s?s.formatNumber:e(U))(e(g)||0),type:"text",class:"bg-transparent text-white text-xl w-full outline-none",placeholder:"0.0",readonly:""},null,8,Ge)])])]),a("div",Oe,[e(L)?(y(),h("button",{key:1,class:"w-[185px] h-9 bg-white text-black rounded-full font-bold",onClick:i[4]||(i[4]=c=>e(ee)()),disabled:e(R)||!e(o)||Number(e(o))<=0},[e(R)?(y(),Q(D,{key:0,type:"spinner",color:"#000"})):(y(),h("span",Le,l(e(t)("立即兑换")),1))],8,qe)):(y(),h("button",{key:0,class:"w-[185px] h-9 bg-white text-black rounded-full font-bold",onClick:i[3]||(i[3]=c=>m.value=!0),disabled:e(I)||!e(o)||Number(e(o))<=0},[e(I)?(y(),Q(D,{key:0,type:"spinner",color:"#000"})):(y(),h("span",Pe,l(e(t)("授权"))+" "+l((S=e(n))==null?void 0:S.tokenInfo.symbol),1))],8,We))]),a("div",Xe,l(e(t)("兑换比例"))+": 1 "+l((Y=e(n))==null?void 0:Y.tokenInfo.symbol)+" = "+l(e(d))+" "+l((j=e(r))==null?void 0:j.tokenInfo.symbol),1)])]),C(ne,{show:e(m),"onUpdate:show":i[5]||(i[5]=c=>K(m)?m.value=c:null),address:(V=e(n))==null?void 0:V.tokenInfo.address,amount:e(o)||0,approve:e($)},null,8,["show","address","amount","approve"])])}}}),rt=we(Ze,[["__scopeId","data-v-e47d5f90"]]);export{rt as default};
